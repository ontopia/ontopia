<?xml version="1.0"?>
<project name="copy-shared-docbook-resources">

	<!-- adds the ant-contrib tasks (propertyregex and foreach used below) -->
	<taskdef resource="net/sf/antcontrib/antcontrib.properties"/>

	<target name="main">
		<!-- default documentation directory is final part of project artifactId -->
		<!-- e.g. ontopia-webed -> webed, webapp-ontopoly -> ontopoly -->
		<!-- this can be overwritten by providing a comma separated property 'documentation.directories' -->
		<propertyregex property="documentation.directories" input="${project.artifactId}"
			regexp="([^\.]*)-([^\.]*)" select="\2" override="false"/>
		<foreach list=".,${documentation.directories}" param="documentation.directory" target="copy-resources" inheritall="true"/>
		
		<!-- copy the site (without index or api) to the parent -->
		<copy todir="../target/site">
			<fileset dir="target/site" excludes="index.html,api/**" includes="**/*.*"/>
		</copy>
				
	</target>

	<!-- copy all shared resources -->
	<target name="copy-resources">
		<copy todir="target/site/${documentation.directory}">
			<fileset dir="../src/docbook/resources"/>
		</copy>
	</target>

</project>
