<?xml version="1.0" encoding="iso-8859-1" standalone="yes"?>
<!-- DOCTYPE article PUBLIC '-//OASIS//DTD DocBook XML V4.1//EN' '' -->

<article class="techreport">
<title>Ontopia</title>
<subtitle>What's new</subtitle>
<articleinfo>
<author>
<affiliation>
<shortaffil>Ontopia</shortaffil>
</affiliation>
</author>
<pubdate>$Date: 2008/08/19 12:21:07 $</pubdate>
<releaseinfo>5.0 ($Revision: 1.144 $)</releaseinfo>
</articleinfo>

<abstract>
<para>
This document describes what has changed in Ontopia between releases,
both at a higher level, and in more detail.
</para>
</abstract>

<!-- ======================================================================
     5.0.0                                                              -->
<section>
<title>Ontopia 5.0.0 release notes</title>

<para>The biggest change with this release is a business change: the
product is now open source, and the name has changed from the Ontopia
Knowledge Suite to just Ontopia. A consequence of this change is that
the license key restrictions are now completely gone from the product.
You no longer need a valid license key to run Ontopia.</para>

<para>The following changes have been made:</para>

<itemizedlist>
  <listitem>
    <para>Ontopia now requires Java 1.5.</para>
  </listitem>
  <listitem>
    <para>The old TMAPI 1.0 support has been removed, and support for
    TMAPI 2.0 added in its place.</para>
  </listitem>
  <listitem>
    <para>The tolog query engine now has a new optimizer. See
    <ulink url="http://ontopia.wordpress.com/2009/06/18/new-reordering-optimizer/"
    >the blog</ulink> for more details.</para>
  </listitem>
  <listitem>
    <para>The <classname>net.ontopia.topicmaps.query.utils.TologSpy</classname>
    class has been added, providing a jdbcspy-like query profiler for
    tolog queries.</para>
  </listitem>
  <listitem>
    <para>The <classname>net.ontopia.topicmaps.utils.QNameRegistry</classname>
    and <classname>QNameLookup</classname> classes have been added, providing
    convenient lookup of topics using qnames.</para>
  </listitem>  
  <listitem>
    <para>The old net.ontopia.product classes have been removed, in
    favour of a single new class named
    <classname>net.ontopia.Ontopia</classname>.</para>
  </listitem>
  <listitem>
    <para>The old net.ontopia.infoset.fulltext API is no longer
    supported and will be removed soon. The full-text search in tolog
    will continue to work.</para>
  </listitem>
  <listitem>
    <para>The command-line tool
    <classname>net.ontopia.topicmaps.cmdlineutils.Canonicalizer</classname>
    has been updated to output ISO CXTM instead of Ontopia's old
    non-standard canonical format.</para>
  </listitem>
</itemizedlist>

<para>The following bugs have been fixed:</para>

<itemizedlist>  
  <listitem>
    <para><ulink url="http://code.google.com/p/ontopia/issues/detail?id=2"
     >Issue 2:</ulink> template definitions crash CTM parser</para>
  </listitem>
  <listitem>
    <para><ulink url="http://code.google.com/p/ontopia/issues/detail?id=9"
     >Issue 9:</ulink> Nontopoly model in Omnigator broken
    </para>
  </listitem>
  <listitem>
    <para><ulink url="http://code.google.com/p/ontopia/issues/detail?id=20"
     >Issue 20:</ulink> Exporting topic maps without schema broken in Ontopoly
    </para>
  </listitem>
  <listitem>
    <para><ulink url="http://code.google.com/p/ontopia/issues/detail?id=28"
     >Issue 28:</ulink> Merging lost item identifiers if they were the
    same as some subject identifier    
    </para>
  </listitem>
</itemizedlist>
</section>

<!-- ======================================================================
     4.1.0                                                              -->
<section>
<title>OKS 4.1.0 release notes</title>

<para>This release contains a major upgrade of Ontopoly, the Topic
Maps editor. The internals of the editor has to a major extent been
rewritten and modularized. Most of the old functionality is still
there, and we have also added a lot new features:</para>

<itemizedlist>
  <listitem>
    <para></para>
  </listitem>
  <listitem>
    <para>The ontology model used by the editor is now represented in
    a way that allows it to be edited by Ontopoly itself. All editing
    of topic maps data, including the Ontopoly schema, now happen
    through the same editor components. The rationale for doing this
    has been to make it easier to extend the editor and repurpose its
    components in new contexts. Improving the embeddability of the
    editor has been an important goal of this release.</para>
  </listitem>
  <listitem>
    <para>Fields are now first class citizens, and this makes it
    possible to say things about them. The fields are now represented
    as topics in the ontology model. This makes the model a lot more
    flexible as one can now say things about the fields and ask
    questions about them more easily.</para>
  </listitem>
  <listitem>
    <para>Support for field views has been added. This lets you assign
    a field to one or more views, so that if you edit a topic in a
    particular view, only the fields declared on the topic type in
    that view are shown. This can be specified on the "Part of views"
    field on the name field, identity field, occurrence field, or role
    field topics.</para>
  </listitem>
  <listitem>
    <para>One can now customize how a field is rendered in the
    different views, e.g. it can be read-only in one view, but
    editable in another. Links to topics can be traversable in some
    views, not not others, and so on. This can be specified on the
    "View mode" field on the name field, identity field, occurrence
    field, or role field topics. The available options are "Embedded",
    "Hidden", "Not traversable", and "Read-only".</para>
  </listitem>
  <listitem>
    <para>Topics in association fields can now be edited in embedded
    mode. This lets you edit the referenced topics on the same page as
    the current one. There are no restrictions on how many nested
    embedded topics there can be. This can be configured per field and
    view. This feature has been used extensively in the Ontopoly
    ontology editor. All the grey boxes with borders are actually
    embedded field values, and thus topics in the topic map.</para>
  </listitem>
  <listitem>
    <para>Given a field in a particular view, it is possible to
    specify the view referenced by the links to other topics. This
    allows one to change the view as the user navigates from topic to
    topic in the editor. This is specified through the "Value view"
    field on the role field topic.</para>
  </listitem>
  <listitem>
    <para>Reordering fields in the topic type fields editor is now
    done through drag-and-drop.</para>
  </listitem>
  <listitem>
    <para>Binary association field values are now sortable. The user
    can reorder field values using drag-and-drop. This can be enabled
    by checking the "Sortable" field on the role field topic.</para>
  </listitem>
  <listitem>
    <para>One can now specify the create and selection policies on
    association fields. This lets one restrict how topics are selected
    for the field, and also how they are created and deleted. This is
    done through the "Edit modes" field on the role field topic. The
    options are "Existing values only", "New values only", "No edit",
    "Normal", "Owned values"</para>
  </listitem>
  <listitem>
    <para>One can now define what happens when a new player topic is
    created on a field. This is done through the "Create actions"
    field on the role field topic. The options are: "Edit new topic in
    popup window", "Go to new topic", and "None".</para>
  </listitem>
  <listitem>
    <para>It is possible to fully customize what topic types one can
    select or create instances of in a given context for a given
    field. This is done through the "Players query", "Players search
    query", and "Players types query" fields on the role field
    topic.</para>
  </listitem>
  <listitem>
    <para></para>
  </listitem>
  <listitem>
    <para></para>
  </listitem>
</itemizedlist>

<para>Other minor changes in this release are:</para>

<itemizedlist>
  <!--listitem>
    <para>A <emphasis>short circuiting or</emphasis> clause has been
    added to tolog. The syntax is the same as for regular
    <emphasis>or</emphasis> clauses, except that <command>||</command>
    is used as the separator instead of <command>|</command>. This
    clause behaves similarly to an if-then-else operator. Only the
    first clause that evaluates to true will be part of the
    result.</para>
  </listitem-->
  <listitem>
    <para>Ordering by tolog variable that contains objects of
    different types will now order topics relatively by name, the same
    behavour as when ordering a topic-only variable. The old behavior
    in this case was to order by object id. This has been done to
    reduce the confusion that occurs when topics suddenly appear
    unordered even though one said that they should be ordered.</para>
  </listitem>
  <listitem>
    <para>The tolog query tracer is now properly thread safe and will
    keep a query trace stack per thread. This prevents multiple
    threads to interfere with each others query traces.</para>
  </listitem>
  <listitem>
    <para><filename>jgroups-all.jar</filename> has been upgraded to
    the JGroups 2.6.10.merge release.</para>
  </listitem>
</itemizedlist>

</section>

<!-- ======================================================================
     4.0.5                                                              -->
<section>
<title>OKS 4.0.5 release notes</title>

<para>This release fixes several bugs and adds support for importing
CTM files (ISO 13250-6: CTM (Compact Notation)). The following bugs
have been fixed:</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1963"
    >Bug #1963:</ulink> TMXMLWriter does not seem to support multityped topics.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2161"
    >Bug #2161:</ulink> Broken encoding when exporting from Ontopoly</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2162"
    >Bug #2162:</ulink> Ontopoly User Guide: broken link</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2167"
    >Bug #2167:</ulink> MergeUtils overwrites existing topic map reifier</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2168"
    >Bug #2168:</ulink> Merging causes "Cannot reassign object" error</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2171"
    >Bug #2171:</ulink> Symmetric association types broken</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2173"
    >Bug #2173:</ulink> Instances tab should be default </para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2175"
    >Bug #2175:</ulink> IndexOutOfBoundsException on association type config</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2178"
    >Bug #2178:</ulink> Multiple changes to same topic not handled correctly</para>
  </listitem>
</itemizedlist>

</section>

<!-- ======================================================================
     4.0.4                                                              -->
<section>
<title>OKS 4.0.4 release notes</title>

<para>This release is a security release.</para>

<warning><para>There is a security hole in earlier releases that made
it possible to upload web archive files (.war) files remotely. Please
upgrade to releases 3.4.7 or 4.0.4 as these do not have this
problem.</para>

<para>As an alternative to upgrading one can delete the directory
<filename>$OKS_HOME/apache-tomcat/server/webapps/manager</filename>
and the files
<filename>$OKS_HOME/apache-tomcat/conf/Catalina/localhost/manager.xml</filename>
and <filename>$OKS_HOME/apache-tomcat/conf/tomcat-users.xml</filename>
before restarting the Apache Tomcat server.</para></warning>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2166"
    >Bug #2166:</ulink> Tomcat allows remote exceution of arbitrary code</para>
  </listitem>
</itemizedlist>
</section>

<!-- ======================================================================
     4.0.3                                                              -->
<section>
<title>OKS 4.0.3 release notes</title>

<para>This release is a bug fix release.</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2146"
    >Bug #2146:</ulink> Symmetric checkbox is disabled on unary association</para>
  </listitem>
  <listitem>
		<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2147"
    >Bug #2147:</ulink> Omnigator export plug-in exports topic maps with the name null.xml</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2149"
    >Bug #2149:</ulink> Ordering by multi-typed variables fails with ClassCastException</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2150"
    >Bug #2150:</ulink> jing.jar is broken on Java 6, MacOSX</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2151"
    >Bug #2151:</ulink> TopicIF.remove() does not remove scoped objects</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2152"
    >Bug #2152:</ulink> Oracle Text full-text query fails because of datatype issue</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2158"
    >Bug #2158:</ulink> Oracle CLOB indexes does not work properly</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2160"
    >Bug #2160:</ulink> Negation fails with a NullPointerException</para>
  </listitem>
  <listitem>
    <para>Apache Tomcat has been upgraded to version 5.5.27.</para>
  </listitem>
</itemizedlist>
</section>

<!-- ======================================================================
     4.0.2                                                              -->
<section>
<title>OKS 4.0.2 release notes</title>

<para>This release is a bug fix release.</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2110"
    >Bug #2110:</ulink> Vizlet "further-associations boxes" not displayed when Untyped topics filtered out</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2134"
    >Bug #2134:</ulink> Selections on export screen not respected</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2135"
    >Bug #2135:</ulink> Default focus on instance page</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2136"
    >Bug #2136:</ulink> Modal browse page and InstanceTypesPage not hierarchical</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2137"
    >Bug #2137:</ulink> Enter keypress should trigger search button</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2138"
    >Bug #2138:</ulink> Omnigator Edit plug-in pointed to old Ontopoly</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2140"
    >Bug #2140:</ulink> Incorrect display of image fields in read-only mode</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2141"
    >Bug #2141:</ulink> LTMTopicMapWriter does not export external occurrences correctly</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2142"
    >Bug #2142:</ulink> Should not be able to create instances of read-only topic types</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2143"
    >Bug #2143:</ulink> Read-only association type not respected on instance page</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2144"
    >Bug #2144:</ulink> Vizlet cannot display rdbms topics without identifiers</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2145"
    >Bug #2145:</ulink> ClassCastException thrown when retrieving large read-only occurrence value</para>
  </listitem>
</itemizedlist>

<para>A new feature in Ontopoly is that the create button now opens
the new topic in a modal window. This was done to prevent navigating
away from the current topic.</para>

<para>Note that the <filename>backport-util-concurrent.jar</filename>
jar-file has been added to the distribution, so an upgrade of an OKS
application must include this file.</para>

</section>

<!-- ======================================================================
     4.0.1                                                              -->
<section>
<title>OKS 4.0.1 release notes</title>

<para>This release is a bug fix release.</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2127"
    >Bug #2127:</ulink> Stack overflow in snapshot code</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2128"
    >Bug #2128:</ulink> Invalid action in old Ontopoly instance</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2129"
    >Bug #2129:</ulink> applications.xml is mandatory</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2130"
    >Bug #2130:</ulink> Ontopoly throws exception when association type has no roles</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2131"
    >Bug #2131:</ulink> Dynamic occurrence predicate filters by xsd:string and xsd:anyURI datatypes</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2132"
    >Bug #2132:</ulink> Value predicate returns values of datatype xsd:anyURI</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2133"
    >Bug #2133:</ulink> No match for association field</para>
  </listitem>
</itemizedlist>

</section>

<!-- ======================================================================
     4.0.0                                                              -->
<section>
<title>OKS 4.0.0 release notes</title>

<para>This is a major new release. The main changes are complete
support for the TMDM and XTM 2.0 specifications, clustering support
and an Ontopoly reimplementation. Note that there are also changes
made to the public APIs that are not backward compatible. See below
for more information on how to handle this.</para>

<para>Other than the changes described below all other existing
components of the OKS should continue to work like before.</para>

<warning><para>As the new TMDM support required substantial API
changes this release does not guarantee backward compatibility. This
means that existing applications that use the Java APIs must be
recompiled before deployed with OKS 4.0.</para></warning>

<warning><para>Because the RDBMS database schema contains a lot of
changes existing topic maps must be exported from the old schema and
reimported into the new schema. Use the XTM 1.0 format to do this. (If
you're upgrading from the 4.0 beta release you'll have to upgrade the
database schema before using the final release.)</para></warning>

<warning><para>The OKS now requires Java 1.4 or newer.</para></warning>

<section>
<title>New features</title>

<itemizedlist>
  <listitem>
    <para>OKS now fully supports the standards <symbol>ISO 13250-2:
    Topic Maps - Data Model (TMDM)</symbol>, <symbol>ISO 13250-3:
    Topic Maps - XML Syntax (XTM 2.0)</symbol>, and <symbol>ISO
    13250-4: CXTM (Canonicalization)</symbol>.</para>
  </listitem>
  <listitem>
    <para>The OKS can now be clustered. It uses JGroups to notify
    members in the cluster about cache invalidation events. This
    allows different OKS instances accessing the same topic map to be
    run on multiple nodes in a cluster. Web-Editor locks can be
    clustered with Terracotta. See the <symbol>The RDBMS Backend
    Connector - Installation Guide</symbol> and <symbol>The Web Editor
    Framework - Developer's Guide</symbol> documents for more
    information on how to set it up.</para>
  </listitem>
  <listitem>
    <para>Ontopoly has been reimplemented on top of the Apache Wicket
    framework, a component framework. The new version is more
    interactive as it uses AJAX technology to update parts of the
    user-interface instead of rerendering the page on every
    change. All changes made through the interface are immediately
    reflected on the server-side, so the old "Confirm" and "Reset"
    buttons are now history. The main rationale for reimplementing
    Ontopoly has been to make it more flexible and extensible. The old
    version used JSP and became difficult to maintain. New features
    are: support for HTML and image occurrence datatypes and that
    instances can be turned into types and vice-versa. Note that the
    user guide is not yet up to date with the new user
    interface.</para>
  </listitem>
  <listitem>
    <para>XTM 2.0 import and export support has been added. XTM import
    will auto-detect the version used, and will support both versions
    transparently. XTM export defaults to XTM 2.0.</para>
  </listitem>
  <listitem>
    <para>Support for datatypes on variant names and occurrences has
    been added. The datatype can now be specified when the value is
    being set. Any datatype can be used in the model, but note that
    few datatypes will not be explicitly supported by all Topic Maps
    software. API methods that refer to String and LocatorIF, but
    specifies no datatype, uses the
    datatypes <symbol>http://www.w3.org/2001/XMLSchema#string</symbol>
    and <symbol>http://www.w3.org/2001/XMLSchema#anyURI</symbol>
    respectively.</para>
  </listitem>
  <listitem>
    <para>The most common data types can be found as constants in the
    DataTypes class.</para>
  </listitem>
  <listitem>
    <para>DB2TM now supports arbitrary datatypes.</para>
  </listitem>
  <listitem>
    <para>Occurrences and variant names can now have values of
    arbitrary length. Use the OccurrenceIF.setReader(Reader, long,
    LocatorIF) and VariantNameIF.setReader(Reader, long, LocatorIF)
    methods to set really long values. Binary values will have to be
    string encoded, e.g. using Base64.</para>
  </listitem>
  <listitem>
    <para>The NameIndexIF index has been updated to support variants
    and their datatypes.</para>
  </listitem>
  <listitem>
    <para>The OccurrenceIndexIF index has been updated to support
    occurrence datatypes.</para>
  </listitem>
  <listitem>
    <para>The TopicMapBuilderIF interface has been changed so that
    invalid objects cannot be constructed. This was done as the TMDM
    specification states that partial objects are not valid. See the
    javadoc API documentation for more information.</para>
  </listitem>
  <listitem>
    <para>The TopicMapBuilderIF and mutable metods in the object model
    now perform rigorous checks to verify that object models don't get
    polluted by cross-topic map references. Also, removed objects
    cannot be reattached to properties in the object model. In
    practice this new behaviour should prevent a whole series of
    possible bug scenarios.</para>
  </listitem>
  <listitem>
    <para>The ReifiableIF interface has been added and objects that
    can be reified now implements this interface. Reification is now
    explicit in the object model. The old implicit reification
    (matching item identifiers and subject identifiers) is not
    explictly supported, except in XTM 1.0 import and export, which
    will translate between the new and old refication models. Use the
    TopicIF.getReified() method to see which object a topic
    reifies.</para>
  </listitem>
  <listitem>
    <para>All LocatorIFs are now restricted to be of
    notation <symbol>URI</symbol>. The object model will throw a
    ConstraintViolationException if a non-URI locator is used. Other
    locator notations should be represented as datatypes
    instead.</para>
  </listitem>
  <listitem>
    <para>Source locators are now called item identifiers in the
    model.</para>
  </listitem>
  <listitem>
    <para>Subject addresses are now called subject locators in the
    model. Topics can now have multiple subject locators. The
    ConflictingSubjectHandlerIF interface has been removed because of
    this.</para>
  </listitem>
  <listitem>
    <para>The BaseNameIF interface has been renamed to
    TopicNameIF. All methods using the name 'base name' has been
    changed accordingly.</para>
  </listitem>
  <listitem>
    <para>AssociationRoleIF.setPlayer(TopicIF),
    TypedIF.setType(TopicIF) (not TopicNameIF) and the value setter
    methods on TopicNameIF, VariantNameIF and OccurrenceIF does not
    support null values and datatypes. Note that the XTM 1.0 and LTM
    importer will create a topic with the
    PSI <symbol>http://psi.ontopia.net/xtm/1.0/null-topic</symbol> to
    represent null values.</para>
  </listitem>
  <listitem>
    <para>The new method TMObjectIF.remove() replaces the old
    TopicMapIF.removeTopic(TopicIF),
    TopicMapIF.removeAssociation(AssociationIF),
    TopicIF.removeBaseName(BaseNameIF),
    TopicIF.removeOccurrenceIF(OccurrenceIF),
    TopicNameIF.remove and VariantName(VariantNameIF) methods.</para>
  </listitem>
  <listitem>
    <para>TopicMapIF.clear() replaces DeletionUtils.clearTopicMap(TopicMapIF).</para>
  </listitem>
  <listitem>
    <para>The tolog query language will continue to work as
    before. There are no changes to the public interface.
    The <symbol>datatype</symbol> predicate has been added to allow
    one to query on the datatype of variants and
    occurrences.<!-- Currently the <symbol>value</symbol>
    and <symbol>value-like</symbol> predicate use
    the <symbol>http://www.w3.org/2001/XMLSchema#string</symbol>
    datatype and the <symbol>resource</symbol> predicate use
    the <symbol>http://www.w3.org/2001/XMLSchema#anyURI</symbol>
    datatype. --></para>
  </listitem>
  <listitem>
    <para>Added method AssociationBuilder.makeAssociation(TopicIF,
   TopicIF, TopicIF, TopicIF) for creating associations with four
   roles.</para>
  </listitem>
  <listitem>
    <para>The RDBMS database schema has been updated to support the
    new object model. Note that you will have to transision between
    the new and old schemas by exporting and importing the topic
    maps.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Removed features</title>

<itemizedlist>
  <listitem>
    <para>The HyTM format is no longer supported.</para>
  </listitem>
  <listitem>
    <para>Facets, facet values, mnemonics and effective scope are no
    longer part of the topic map engine model as these features are no
    longer part of the Topic Maps standards. They are also not seen as
    neccessary for the development of Topic Maps, hence their removal
    from the software.</para>
  </listitem>
  <listitem>
    <para>The MultiTypedIF interface has been removed as it was
    considered superflous.</para>
  </listitem>
  <listitem>
    <para>Most methods and classes that were marked as deprecated in
    earlier releases have been removed from the distribution. Make
    sure that you don't use any of the remaining once as these may be
    removed at a later time.</para>
  </listitem>
  <listitem>
    <para>The TopicMapTransactionIF interface has been removed as all
    the useful methods have been moved to either TopicMapStoreIF and
    TopicMapIF.</para>
  </listitem>
  <listitem>
    <para>The IndexManagerIF interface has been removed. Use the
    TopicMapIF.getIndex(String) method to retrieve the indexes
    instead. As all indexes are automatically kept up to date
    automatically the old interface was superflous.</para>
  </listitem>
  <listitem>
    <para>The IndexIF interface is still there, but now only works as
    a marker interface as the old methods have been removed.</para>
  </listitem>
  <listitem>
    <para>The TopicMapFactoryIF interface has been removed and
    replaced by the modified TopicMapBuilderIF interface.</para>
  </listitem>
  <listitem>
    <para> The class DeletionUtils has been removed as the methods
    TMObjectIF.remove() and TopicMapIF.clear() replaces it.</para>
  </listitem>
  <listitem>
    <para> The class ReificationUtils has been removed as the method
    TopicIF.getReified() and the ReifiableIF interface replaces it.</para>
  </listitem>
  <listitem>
    <para>The LocatorIndexIF index has been removed. It is replaced by
    methods in NameIndexIF and OccurrenceIndexIF.</para>
  </listitem>
  <listitem>
    <para>Support for the Topic Naming Constraint has been removed.</para>
  </listitem>
  <listitem>
    <para>TopicMapIF.getObjectByItemIdentifier(LocatorIF) replaces
    TopicMapIF.getObjectBySourceLocator(LocatorIF).</para>
  </listitem>
  <listitem>
    <para>TopicMapIF.getTopicBySubjectLocator(LocatorIF) replaces
    TopicMapIF.getTopicBySubject(LocatorIF).</para>
  </listitem>
  <listitem>
    <para>TopicMapIF.getTopicBySubjectIdentifier(LocatorIF) replaces
    TopicMapIF.getTopicByIndicator(LocatorIF).</para>
  </listitem>
  <listitem>
    <para>TMObjectIF.getItemIdentifiers(),
    TMObjectIF.addItemIdentifier(LocatorIF) and
    TMObjectIF.removeItemIdentifier(LocatorIF) replaces
    TMObjectIF.getSourceLocators(),
    TMObjectIF.addSourceLocator(LocatorIF) and
    TMObjectIF.removeSourceLocator(LocatorIF).</para>
  </listitem>
  <listitem>
    <para>TopicIF.getSubjectLocators(),
    TopicIF.addSubjectLocator(LocatorIF),
    TopicIF.removeSubjectLocator(LocatorIF) replaces
    TopicIF.getSubject() and TopicIF.setSubject(LocatorIF).</para>
  </listitem>
  <listitem>
    <para>TopicIF.getSubjectIdentifiers(),
    TopicIF.addSubjectIdentifier(LocatorIF) and
    TopicIF.removeSubjectIdentifier(LocatorIF) replaces
    TopicIF.getSubjectIndicators(),
    TopicIF.addSubjectIndicator(Locator) and
    TopicIF.removeSubjectIndicator(LocatorIF).</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Other changes</title>

<para>Bug fixes:</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2120"
    >Bug #2120:</ulink> Ordering by length of a string causes exception</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2123"
    >Bug #2123:</ulink> NullPointerException in comparison query</para>
  </listitem>
</itemizedlist>

<para>The Web Editor framework actions have seen a few changes because
of the changes to the object model. The changes are:</para>

<itemizedlist>
  <listitem>
    <para>AddExtOccurrence: the type parameter is now required.</para>
  </listitem>
  <listitem>
    <para>AddIntOccurrence: the type parameter is now required.</para>
  </listitem>
  <listitem>
    <para>RemoveType: now only works with TopicNameIF objects.</para>
  </listitem>
  <listitem>
    <para>SetPlayer: the player parameter is now required.</para>
  </listitem>
</itemizedlist>
</section>

</section>

<!-- ======================================================================
     3.4.5                                                              -->
<section>
<title>OKS 3.4.5 release notes</title>

<para>This release is a bug fix release.</para>

<warning><para>If you get the following error message when starting one of the web applications, then you must remove the DOCTYPE declaration from the top of the <filename>actions.xml</filename> file.</para>
<para><literal>org.xml.sax.SAXParseException: Relative URI "actionConfig.dtd"; can not be resolved without a base URI.</literal></para>
<para>This error occurs because of the XML parser cannot retrieve the DTD through the class loader.</para></warning>

<section>
<title>General</title>

<para>
The following change has been made:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1962"
    >Bug #1962:</ulink> Reification support not implemented in TMXMLWriter.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Ontopoly</title>

<para>
The following change has been made:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2117"
    >Bug #2117:</ulink> Cannot remove role field with interface control not set</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Omnigator</title>

<para>
The following change has been made:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1403"
    >Bug #1403:</ulink> Visualization of n-ary associations not intuitive</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The following change has been made:
</para>

<itemizedlist>
  <listitem>
    <para>The resources pointed to by the <symbol>log4j_config</symbol>, <symbol>app_config</symbol> and <symbol>action_config</symbol> web.xml context parameters will be attempted loaded through the class loader if not found on the file system. One can also use the <symbol>file:</symbol> and <symbol>classpath:</symbol> URI schemes directly.</para>
  </listitem>
  <listitem>
    <para>Module files referred to from <symbol>&lt;logic:include&gt;</symbol> will be loaded through the class loader if found there. Otherwise they will be loaded through the file system as before.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor</title>

<para>
The following change has been made:
</para>

<itemizedlist>
  <listitem>
    <para><symbol>&lt;tolog:foreach&gt;</symbol> tags failed on weblogic
    container when nested three or more levels. This has now been
    fixed.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS</title>

<para>
The following change has been made:
</para>

<itemizedlist>
  <listitem>
    <para>The SQL statement used for full-text searches on MySQL was semantically incorrect and caused an incorrect result to be returned.</para>
  </listitem>
</itemizedlist>
</section>

</section>

<!-- ======================================================================
     3.4.4                                                              -->
<section>
<title>OKS 3.4.4 release notes</title>

<para>This release is a bug fix release.</para>

<section>
<title>General</title>

<para>
The following change has been made:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2111"
    >Bug #2111:</ulink> Images in the documentation did not show up in Internet Explorer</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title>

<para>
The following change has been made:
</para>

<itemizedlist>
  <listitem>
    <para>The query processor will now write warnings as stack traces
    to the log4j log if the time and memory spent executing a query
    exceed 3 seconds or 5 MB. This is done in the DEBUG logging level.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Ontopoly</title>

<para>
The following changes have been made:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2035"
    >Bug #2035:</ulink> The link button did not work with URLs containing ampersands.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2036"
    >Bug #2036:</ulink> Instances of abstract topic types can now been seen.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2111"
    >Bug #2111:</ulink> Some of the sample topic maps were missing hierarchical declarations.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2114"
    >Bug #2114:</ulink> Topic maps with no name did not show up on start page.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title>

<para>
The following changes have been made:
</para>

<itemizedlist>
  <listitem>
    <para>Improved the performance of the tolog predicates
    direct-instance-of($X,foo) and instance-of($X,foo). This was done
    by using a less expensive SQL query.</para>
  </listitem>
  <listitem>
    <para>The RDBMSPatternSingleTopicMapSource now returns empty list
    of references instead of a collection with a null element when no
    topic map was found.</para>
  </listitem>
</itemizedlist>
</section>

</section>

<!-- ======================================================================
     3.4.3                                                              -->
<section>
<title>OKS 3.4.3 release notes</title>

<para>This release is a primarily a bug fix release, but it also
introduces a much requested extension to the event model in the topic
map engine.</para>

<section>
<title>Engine</title>

<para>
The following changes have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The Topic Maps engine now has support for topic modification
    events. The <classname>TopicMapListenerIF</classname> interface
    now has a new method called
    <methodname>objectModified(TMObjectIF)</methodname> which will be
    called when a topic has been modified.</para>
  </listitem>
  <listitem>
    <para>A base topic map listener class called
    <classname>AbstractTopicMapListener</classname> has been
    introduced. This abstract class contains default implementations
    of all the callback methods. The class was primarily introduced so
    that listener implementations extending it can continue to work
    even though new methods get added to the listener interface in the
    future.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator</title>

<para>The <symbol>omnigator</symbol>, <symbol>manage</symbol> and
<symbol>i18n</symbol> web applications was updated to use the new tag
library URIs. This means that they will no longer use the
<filename>.tld</filename> files in the
<filename>WEB-INF/jsp</filename> directories.</para>

</section>

<section>
<title>Ontopoly</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para>The create button was duplicated on each row on fields with
    repeated values. This was changed so that the create button now
    only shows up on the last row.</para>
  </listitem>
  <listitem>
    <para>Fixed bug that caused create buttons to show up even though
    hideCreateButtons property was set.</para>
  </listitem>
  <listitem>
    <para>Specified the max-width CSS property on drop-down lists to
    500px to prevent very wide pages.</para>
  </listitem>
  <listitem>
    <para>Fixed bug that caused the last association in a
    many-cardinality field to be replaced when selecting a topic
    through the search or browse popup windows. The correct behaviour
    is to instead add a new association.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2080"
    >Bug #2080:</ulink> Illegal occurrence fields cannot be deleted.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Classify</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para>Improved presentation performance by changing one of the
    tolog queries used by the implementation. The user-interface
    should now be much more responsive.</para>
  </listitem>
  <listitem>
    <para>Fixed bug that caused association types to not be shown on
    subtypes of the type that declared the association field.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Vizigator</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2076"
    >Bug #2076:</ulink> Graphs do not draw correctly when double click operation is done on nodes.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2106"
    >Bug #2106:</ulink> Runtime Exception message on Java console in Vizlet</para>
  </listitem>
</itemizedlist>
</section>

</section>

<!-- ======================================================================
     3.4.2                                                              -->
<section>
<title>OKS 3.4.2 release notes</title>

<para>
This release is a bug fix release.
</para>

<section>
<title>Admin console</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2101"
    >Bug #2101:</ulink> JSP compile error on Manage page</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Ontopoly</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2045"
    >Bug #2045:</ulink> Create type and instance buttons on topic type
    config are hidden if the topic type is locked</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Topic Maps Engine</title>

<para>The following constructors of
<classname>XTMTopicMapWriter</classname> have been changed so that
they are now declared to throw
<exceptionname>IOException</exceptionname>:
<methodname>XTMTopicMapWriter(File file, String encoding)</methodname>
and <methodname>XTMTopicMapWriter(Writer writer, String
encoding)</methodname>. Note that this may cause compilation errors.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2098"
    >Bug #2098:</ulink> Writers close streams passed in from outside</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2102"
    >Bug #2102:</ulink> Incorrect type inferencing in comparison
    predicates</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS backend</title>

<para>
The experimental
<classname>RDBMSPatternSingleTopicMapSource</classname> class was
added in the <symbol>net.ontopia.topicmaps.impl.rdbms</symbol>
package. This source can be used to swap topic maps used by an
implementation at runtime.
</para>

<para>
The <symbol>--title</symbol> and <symbol>--comment</symbol> options
for setting the title and comments of a topic map were added to the
<classname>RDBMSImport</classname> command-line utility.
</para>
</section>
</section>


<!-- ======================================================================
     3.4.1                                                              -->
<section>
<title>OKS 3.4.1 release notes</title>

<para> 
This is a bug fix release. If you are using Ontopoly then it is
important that you do an upgrade as this release fixes a serious
problem with character encoding of form data in Ontopoly. This release
includes a few more bug fixes as well.  
</para>

<section>
<title>Ontopoly</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2096"
    >Bug #2096</ulink>: Ontopoly obfuscates Unicode characters.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2094"
    >Bug #2094</ulink>: Export plugin closes JSP output stream closed too early.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Omnigator</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2094"
    >Bug #2094</ulink>: Export plugin closes JSP output stream closed too early.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Engine</title>

<para>
The following bugs and improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2095"
    >Bug #2095</ulink>: <symbol>MergeUtils</symbol> does not replace name types.</para>
  </listitem>
  <listitem>
    <para><symbol>MergeUtils</symbol> did not always compare name objects correctly. This
    could lead to duplicate names in some situations.</para>
  </listitem>
  <listitem>
    <para>Added <symbol>TopicMapSourceIF.supportsDelete()</symbol> method, which must be true for it
    to be valid to call <symbol>TopicMapReferenceIF.delete()</symbol>. This replaces
    the old deleteFiles property on topic maps sources.</para>
  </listitem>
  <listitem>
    <para>Added <symbol>TopicMapRepositoryIF.createStore(String, boolean)</symbol> as a
    convenience method.</para>
  </listitem>
  <listitem>
    <para><symbol>TopicMapSynchronizer</symbol> class no longer produces
    duplicate characteristics on synchronized topics.</para>
  </listitem>
</itemizedlist>
</section>

</section>

<!-- ======================================================================
     3.4                                                                -->
<section>
<title>OKS 3.4 release notes</title>

<para>
The main change in this version of the OKS is various upgrades to
Ontopoly, especially the improved locking support, and the new
approach to sharing topic maps between web applications.
</para>

<para>
There is also a new OKS distribution, called Ontopoly Runtime, which
is essentially OKS Samplers with the RDBMS backend and support for
authentication. This means that the new distribution can be used by
customers which want to use Ontopoly to create topic maps without
developing new custom applications. The price also reflects this.  See
<ulink url="http://www.ontopia.net/solutions/pricelist.html" >the OKS
price list</ulink> for more information.
</para>

<section>
<title>Ontopoly</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>Some changes have been made to the Ontopoly schema. The new
schema version is 1.2, so Ontopoly will ask you to upgrade your
existing topic maps.</para>
  </listitem>  
  <listitem>
    <para>Users can now manually unlock topics locked by other users,
    and they can see who has locked the topic and when, making it
    easier to decide if they can safely unlock the topic.</para>
  </listitem>  
  <listitem>
    <para>Ontopoly will now automatically unlock the currently edited
    topic in many more cases than it did previously. It is no longer
    necessary to submit the form to unlock a topic; just following
    normal links will also unlock the current topic.</para>
  </listitem>
  <listitem>
    <para>Ontopoly now displays a formatting hint for date values, to
    make it easier for users to remember what the date format is.</para>
  </listitem>
  <listitem>
    <para>The instance editing page now has a "Copy" button for
    creating an identical copy of the current topic. This can be
    convenient when creating many similar topics.</para>
  </listitem>
  <listitem>
    <para>It is now possible to specify whether the search dialog used
    for finding topics to create new associations should open in
    search mode or browse mode.</para>
  </listitem>  
  <listitem>
    <para>The default locale used by the web application is now <symbol>en</symbol>
    instead of relying on the fallback locale given by the web
    browser.</para>
  </listitem>  
</itemizedlist>
</section>

<section>
<title>Omnigator</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>A new topic map index plug-in has been added, so that there is now always a link back to the topic map index page from all other pages.</para>
  </listitem>  
  <listitem>
    <para>The Plug-ins plug-in now displays the plug-ins menu (yes, it is true).</para>
  </listitem>  
</itemizedlist>
</section>

<section>
<title>Auto-classification</title>

<para>
The recognition of compound terms (terms consisting of more than one
word, like "Topic Maps") has been improved, as has the scoring of
these terms.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2082"
    >Bug #2082</ulink>: Norwegian stop words with special characters
    not recognized</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The Navigator Framework has been changed to use a new and much simpler
API for sharing topic maps between applications. Please see the
<citetitle>Navigator Framework Configuration Guide</citetitle> for
details. The API has also been simplified, and a number of classes
made INTERNAL.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para>The JAAS topic maps module was missing some prefix
declarations in one of its tolog queries, causing it to throw an
exception in some situations as the query was sensitive to the base
address of the topic map used.</para>
  </listitem>
  <listitem>
    <para>The JNDI lookup of shared topic maps on OC4J was broken.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor Framework</title>

<para>
The <symbol>readonly</symbol> attribute has been introduced on many
tags to allow applications to control whether or not forms and form
controls should be read only.
</para>
</section>

<section>
<title>Topic Maps Engine</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>
A new class called <classname>TopicMaps</classname> has been added to
the <symbol>net.ontopia.topicmaps.entry</symbol> package. This class
can be used to access topic maps via
<filename>tm-sources.xml</filename> files in a simple and
straightforward way. Please see the javadoc and the
<citetitle>Navigator Framework Configuration Guide</citetitle> for
details.
</para>
  </listitem>
  <listitem>
    <para>The <classname>XTMFragmentExporter</classname> class is now PUBLIC.</para>
  </listitem>
  <listitem>
    <para>The <classname>XMLConfigSource</classname> class (and effectively tm-sources-xml) now uses <symbol>&lt;repository&gt;</symbol> as the document element as this is more consistent with the naming of the topic maps repository. See the included tm-sources.xml for an example. The old syntax is still supported.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2031"
    >Bug #2031</ulink>: Exporting and reimporting via XTM breaks
    reification</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Vizigator</title>

<para>
The performance of the Vizlet has been improved substantially by
changing how the Vizlet loads Topic Maps fragments from the server.
The result is less network traffic and a more responsive Vizlet.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para>There was a bug in the test suite that failed on the first
attempt, but worked on subsequent invocations. This was caused by a
directory not having been created initially.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2081"
    >Bug #2081</ulink>: Go to topic does not work on topics with
    special characters in name</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2073"
    >Bug #2073</ulink>: Node cannot be expanded after collapse</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title>

<para>
The <symbol>source-locator</symbol> predicate has been renamed to
<symbol>item-identifier</symbol>. The old predicate will continue to
work, but it is no longer documented.
</para>
</section>

<section>
<title>RDBMS Backend</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The database properties file will now be attempted loaded from the class loader if not found on the file system. Loading files through the class loader is much more portable and is recommended for most appliations. In practice this means that the database properties file can be copied to one of the directories on the CLASSPATH, and that the reference to it can be just the name of the file.</para>
  </listitem>
  <listitem>
    <para>The connection URLs in the database properties files <symbol>db.sqlserver.props</symbol> and <symbol>db.mysql.props</symbol> have been updated to reflect the latest JDBC driver releases.</para>
  </listitem>
  <listitem>
    <para>Most of the more rare and mostly unused properties have been removed from the default database properties files. Note that the properties can still be used; they are just not included in the files, so that the default values is used instead.</para>
  </listitem>
  <listitem>
    <para>The RDBMS Backend Installation Guide now mentions that the Row Versioning and Snapshot Isloation features must be enabled on Microsoft SQL Server 2005. These two features are essential for good performance in multi-user applications.</para>
  </listitem>
  <listitem>
    <para>The columns <symbol>TM_OCCURRENCE.content</symbol>, <symbol>TM_BASE_NAME.content</symbol>,
    <symbol>TM_VARIANT_NAME.content</symbol> and <symbol>TM_TOPIC_MAP.comments</symbol> have
    been extended from 2000 to 4000 characters on Microsoft SQL Server
    2005 as this is the maximum length supported on <symbol>nvarchar</symbol> columns.</para>
  </listitem>
</itemizedlist>

</section>

<section>
<title>DB2TM</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>DB2TM now looks up relations qualified by schema name before using
    the default schema in JDBC datasources. This change adds support for
    explicit database schemas.</para>
  </listitem>
</itemizedlist>

</section>
</section>

<!-- ======================================================================
     3.3                                                                -->
<section>
<title>OKS 3.3 release notes</title>

<para>
The main new addition in this release is the autoclassification
module, which is still experimental. For more about this, see <xref
linkend="sect-3.3-classify"/>. There are also some new features in the
Vizigator and a new string module in tolog, but beyond that the
changes are mostly bug fixes.
</para>

<section>
<title>Engine</title>

<para>
The following changes have been made to the Engine:
</para>

<itemizedlist>

<listitem><para>commons-dbcp.jar has been upgraded to version
1.2.2.</para></listitem>

<listitem><para>All methods relating to nested transactions have been
deprecated as none of the current Topic Maps implementations actually
support nested transactions.</para></listitem>

<listitem>
  <para>
    <ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2034"
          >Bug #2034</ulink>:
    jena.jar includes log4j.properties
  </para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title>

<para>
The following changes have been made to the Query Engine:
</para>

<itemizedlist>

<listitem><para>tolog has been extended with a module containing
predicates for string operations. This provides operations for working
with substrings, concatenating strings, etc. See the tolog predicate
reference for more information.</para></listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The following changes have been made to the Navigator Framework:
</para>

<itemizedlist>

<listitem><para>Upgraded Apache Tomcat to version 5.5.23.</para></listitem>

<listitem><para>Web applications will now use default shared-in-JVM
topic map repository if neither 'jndi_repository' nor
'source_config_file' parameters are specified in web.xml. This was
done to lower the chances of running with multiple repositories by
mistake. It also makes configuration easier as no configuration is
required by default. We recommend that you remove the parameters from
all your existing web applications.</para></listitem>

<listitem><para>Improved error message thrown when accessing variables
outside of &lt;tolog:context&gt;.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2058">Bug
#2058</ulink>: sequence-last not always correctly set in &lt;tolog:foreach&gt;
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2037">Bug
#2037</ulink>: AXIS reports error in tomcat.log on startup
</para></listitem>

<listitem><para>Upgraded bundled Axis2 version to 1.2.</para></listitem>

</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title>

<itemizedlist>

<listitem><para>Improved detection of deleted object when iterating
over collections. This means that IdentityNotFoundException is no
longer thrown that often while iterating over collections of topic map
objects.</para></listitem>

</itemizedlist>

</section>

<section>
<title>Omnigator</title>

<para>
The following changes have been made to the Omnigator:
</para>

<itemizedlist>

<listitem><para>XTM validation is now enabled by default.</para></listitem>

<listitem><para>No longer supports refresh topic map registry as this
is no longer supported in the framework. Use refresh sources
instead.</para></listitem>

<listitem><para>Added back the plugins plug-in that seems to have been
lost in an older release.</para></listitem>

<listitem>
  <para>
    <ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2039"
          >Bug #2039</ulink>:
    Names types incorrectly displayed
  </para>
</listitem>

</itemizedlist>
</section>

<section>
<title>Ontopoly</title>

<para>
The following changes have been made:
</para>

<itemizedlist>

<listitem><para>Support for automatic classification has been added,
as a plug-in on the instance editing page. See the Ontopoly User's
Guide for more information, as well as <xref
linkend="sect-3.3-classify"/>.</para></listitem>

<listitem>
  <para>The display of the add, create, and search buttons on the
  instance page has been made more consistent and intuitive. The
  functionality is the same as before.</para>
</listitem>

<listitem>
  <para>
    <ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1854"
          >Bug #1854</ulink>:
    Some topics become both types and instances on import
  </para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Vizigator</title>

<para>
The following new features have been added to the Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para>The filter controls previously only found in VizDesktop can
    now also be accessed in Vizlet.</para>
  </listitem>

  <listitem>
    <para>A new applet parameter <symbol>wallpaper_image</symbol> has
    been added, which makes it possible to display a background image
    in the Vizlet.</para>
  </listitem>

  <listitem>
    <para>Both VizDesktop and Vizlet now support undo and redo.</para>
  </listitem>

  <listitem>
    <para>
      <ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2060"
             >Bug #2060</ulink>:
      Opening non-existent file causes NPE
    </para>  
  </listitem>
  <listitem>
    <para>
      <ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2061"
             >Bug #2061</ulink>:
      Association type filter doesn't show state
    </para>  
  </listitem>  
</itemizedlist>
</section>

<section>
<title>DB2TM</title>

<itemizedlist>

<listitem><para>Added servlet
<classname>net.ontopia.topicmaps.db2tm.SynchronizationServlet</classname>
that can be used to schedule regular DB2TM synchronizations. See the
javadoc for more information.</para></listitem>

</itemizedlist>

</section>

<section id="sect-3.3-classify">
<title>Automatic classification</title>

<para>
This module has been added, but in an experimental state. It is only
accessible through a plug-in to Ontopoly, and is described in the
Ontopoly User's Guide. There is no publicly available API at the
moment, but an API exists, and will be made available once we have
received more feedback regarding customer requirements. Supported
languages are English and Norwegian, but support for more languages
can be added.
</para>
</section>

</section>

<!-- ======================================================================
     3.2.4                                                              -->
<section>
<title>OKS 3.2.4 release notes</title>

<para>This release is a bug fix release.</para>

<section>
<title>Engine</title>

<itemizedlist>

<listitem><para>Added
<symbol>net.ontopia.topicmaps.utils.ltm.LTMTemplateImporter</symbol>
class that makes it possible to import LTM fragments outside of the
Web Editor Framework.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2028">Bug
#2028</ulink>: Fixed NullPointerException issue in XTM exporter
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2034">Bug
#2034</ulink>: Removed log4j.properties file from jena.jar
</para></listitem>

</itemizedlist>

</section>

<section>
<title>Query Engine</title>

<itemizedlist>

<listitem><para>Tolog query parser will now throw
<symbol>net.ontopia.topicmaps.query.core.BadObjectReferenceException</symbol>
instead of
<symbol>net.ontopia.topicmaps.query.core.InvalidQueryException</symbol>
when object references in the query cannot be
resolved.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2029">Bug
#2029</ulink>: Recursive rule gave wrong result
</para></listitem>

</itemizedlist>

</section>

<section>
<title>DB2TM</title>

<itemizedlist>

<listitem><para>Non-primary topic entities in relations now get all
their matching characteristic values cleared when the row is
removed. In practice this means that changelog synchronization is not
possible with non-primary topic entities that are stored in multiple
rows.</para></listitem>

</itemizedlist>

</section>

</section>

<!-- ======================================================================
     3.2.3                                                              -->
<section>
<title>OKS 3.2.3 release notes</title>

<para>This release is a bug fix release. If you are using the Web
Editor Framework or DB2TM then an upgrade is recommended.</para>

<section>
<title>Engine</title>

<itemizedlist>

<listitem><para>Two new methods have been added to the TopicMapStoreIF
interface. The first one is <symbol>getProperty(String)</symbol> which
returns the value of the given property. This method can be used to
get hold of topic map store property values in an implementation
independent manner. The second method is
<symbol>getImplementation()</symbol> that returns a constant that
identifies the topic map implementation. This is useful to easily
figure out if the topic map is stored in-memory or in an
rdbms.</para></listitem>

<listitem><para>The third party jar-files antlr.jar and
commons-collections.jar have been upgraded to versions 2.7.7 and
3.2 respectively.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2005">Bug
#2009</ulink>: XTMFragmentExporter did not respect filter settings.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Query Engine</title>

<itemizedlist>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2019">Bug
#2019</ulink>: NullPointerException thrown from rule inliner
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Navigator</title>

<itemizedlist>

<listitem><para> 
log4j logging pattern in tomcat.log is now the same
as in ontopia.log. This means that timestamps are now included in both
log files.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Web Editor</title>

<itemizedlist>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2013">Bug
#2013</ulink>: lack of synchronization in user object
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2021">Bug
#2021</ulink>: Uniqueness of action ids not guaranteed
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Omnigator</title>

<itemizedlist>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1788">Bug
#1788</ulink>: Full-text search not available on RDBMS topic maps
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Ontopoly</title>

<itemizedlist>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2002">Bug
#2002</ulink>: Error message given if topic map was not reified
</para></listitem>

</itemizedlist>
</section>

<section>
<title>DB2TM</title>

<itemizedlist>

<listitem><para>
Improved detection of discrepancies between changelog table and data in actual table.
</para></listitem>

<listitem><para>
Fixed bug that caused some columns to be null when read through changelog table.
</para></listitem>

<listitem><para>
Rescan will now replace the topic type(s) instead of just adding a new one(s).
</para></listitem>

<listitem><para>
Added --force-rescan command line option to db2tm.Execute.
</para></listitem>
</itemizedlist>

</section>

</section>

<!-- ======================================================================
     3.2.2                                                              -->
<section>
<title>OKS 3.2.2 release notes</title>

<para>This release is a small bug fix release.</para>

<section>
<title>Engine</title>

<itemizedlist>

<listitem><para>Most of the no-argument builder methods in
TopicMapBuilderIF have been deprecated because they were no longer
useful.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2009">Bug
#2009</ulink>: XTMFragmentExporter did not respect filter settings.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Web Editor</title>

<itemizedlist>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1997">Bug
#1997</ulink>: Bad error message when topic had no type.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>DB2TM</title>

<itemizedlist>

<listitem><para>Rescan now updates the synchronization state if a
changelog is declared.</para></listitem>

<listitem><para>Fixed problem with NullPointerException when
attempting to run duplicate suppression on deleted
topics.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2007">Bug
#2007</ulink>: Changelog query triggered exception in older Oracle versions.
</para></listitem>

</itemizedlist>
</section>

</section>

<!-- ======================================================================
     3.2.1                                                              -->
<section>
<title>OKS 3.2.1 release notes</title>

<para>This release is primarily a bug fix and improvements release,
but some new functionality have been added. It contains a couple of
important bug fixes, so an upgrade is recommended. Java 1.6 support
has been verified.The main new features are the new management web
application and native full-text support for PostgreSQL and Microsoft
SQL Server.</para>

<section>
<title>Query Engine</title>

<itemizedlist>

<listitem><para>The dynamic association predicate has been
optimized. Tests have indicated a 15% performance
increase.</para></listitem>

<listitem><para>Tolog now supports locale specific sorting. This
feature is disabled by default, but it can be enabled by specifying
the property
<symbol>net.ontopia.topicmaps.query.core.QueryProcessorIF.locale</symbol>. The
properties file will be used by default, but it can also be specified
as a system property. The value consists of three parts, e.g.
<symbol>no_NO_NO</symbol>, where the language, country and
variant codes are separated by the underscore character. The ordering
is implemented in terms of a
<symbol>java.text.Collator</symbol>.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1991">Bug
#1991</ulink>: Nested <symbol>tolog:foreach</symbol> with <symbol>groupBy</symbol> attribute triggered exception.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1992">Bug
#1992</ulink>: occurrence predicate had side-effects when used in OR branch.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2001">Bug
#2001</ulink>: NullPointerException thrown in dynamic association predicate method.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2003">Bug
#2003</ulink>: topicmap predicate failed with RDBMS tolog.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title>

<itemizedlist>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2004">Bug
#2004</ulink>: Potential deadlock in finalizer method.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Engine</title>

<itemizedlist>

<listitem><para><symbol>DuplicateSuppressionUtils</symbol> now does
prefetching of characteristics when applicable. This change leads to a
huge performance improvement, especially with large topic
maps.</para></listitem>

<listitem><para>Reduced memory footprint when doing duplicate
suppression.</para></listitem>

<listitem><para>Prefetching is no longer performed when the shared
cache is disabled.</para></listitem>

<listitem><para><symbol>getTopicMap(ServletRequest request)</symbol>
method has been added to the ContextUtils class. This makes it easy to
get hold of the current topic map object from the parent
<symbol>tolog:context</symbol> tag.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1996">Bug
#1996</ulink>: Subject indicators sometimes lost during XTM import.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>DB2TM</title>

<itemizedlist>

<listitem><para>Improved reuse of topic maps objects when tuples
change. This leads to huge performance improvements when
synchronizing.</para></listitem>

<listitem><para>Defaulting of the <symbol>primary</symbol> attribute
did not work as intented.</para></listitem>

<listitem><para>A new FAQ section has been added to the User's Guide
document.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1989">Bug
#1989</ulink>: DB2TM crashed if row didn't have enough column values
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=2000">Bug
#2000</ulink>: Reuse of occurrence objects failed when changing from
external to internal occurrences (and vice versa).
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Navigator</title>

<itemizedlist>

<listitem><para>The manage plugin in the Omnigator has been refactored
into a new web application. All management of resources is now done
through this application. This new web application introduces a couple
of new features including JDBC profiling, topic map statistics and
shared cache statistics.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1994">Bug
#1994</ulink>: Omnigator did not display typed names correctly.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Full-text</title>

<itemizedlist>

<listitem><para>Native full-text support has been added for PostgreSQL
using tsearch2. The support can be enabled by setting the
<symbol>net.ontopia.infoset.fulltext.impl.rdbms.RDBMSSearcher.type</symbol>
property to <symbol>postgresql</symbol>.</para></listitem>

<listitem><para>Native full-text support has been added for Microsoft
SQL Server. The support can be enabled by setting the
<symbol>net.ontopia.infoset.fulltext.impl.rdbms.RDBMSSearcher.type</symbol>
property to <symbol>sqlserver</symbol>.</para></listitem>

</itemizedlist>
</section>

<section>
<title>Vizigator</title>

<itemizedlist>

<listitem><para>Neighbouring circle feature has been added. This is a
visual effect to draw the attention to a node and its immediate
neighbours.</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1769">Bug
#1769</ulink>: Increment/decrement of locality changed visible links.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1771">Bug
#1771</ulink>: Vizlet graph placement dependent on browser window size.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1984">Bug
#1984</ulink>: Association node could not be collapsed.
</para></listitem>

</itemizedlist>
</section>

<section>
<title>Ontopoly</title>

<itemizedlist>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1999">Bug
#1999</ulink>: Could not change the height and width of occurrence type fields..
</para></listitem>

</itemizedlist>
</section>

</section>

<!-- ======================================================================
     3.2                                                                -->
<section>
<title>OKS 3.2 release notes</title>

<para>
The main change in OKS 3.2 is that Ontopoly has been significantly
extended with new functionality, described below, and that the DB2TM
module now supports updating the topic map with changes from the
source database. In addition, there is a long list of minor
improvements and bug fixes to various parts of the product suite.
</para>

<section>
<title>Ontopoly</title>

<para>
The modifications to Ontopoly are quite extensive, and have required
changes to the Ontopoly meta-ontology. This means that all old topic
maps have to be upgraded in order to make them editable in the new
Ontopoly version. Ontopoly can handle this by itself, however. The
main improvements are:
</para>

<itemizedlist>
  <listitem>
    <para>Extension of the search popup dialog to also support
    browsing lists of all instances of a particular topic type for
    topics to create associations to. The dialog also allows the user
    to create multiple associations in a single operation.</para>
  </listitem>
  <listitem>
    <para>Support for hierarchical associations, and using these to
    create hierarchies for topics of a particular type. This means
    that Ontopoly now supports taxonomies, but also hierarchies of
    other types can also be created. The hierarchies can be seen both
    on the page listing all instances of a particular type, as well as
    in the search popup dialog.</para>
  </listitem>
  <listitem>
    <para>Ontopoly can now also treat ontology topics (that is, topic
    types, association types, etc) as though they were normal topics.
    This means that new fields can be added for these topics, and they
    can be edited in the instance editor. This makes it possible to
    use Ontopoly for ontology annotation.</para>
  </listitem>
  <listitem>
    <para>A number of performance optimizations have been made, to
    ensure that Ontopoly scales to large data sets. Users have also
    been given more control over this, via the "Large instance set"
    property on topic types, which turns off the ability to list all
    instances of these types.</para>
  </listitem>
  <listitem>
    <para>The Ontopoly instance editor is now localizable (meaning
    that it can be translated to any language).</para>
  </listitem>
  <listitem>
    <para>Ontopoly can now export topic maps to the TM/XML syntax.</para>
  </listitem>
  <listitem>
    <para>Ontopoly now uses Navigator Framework plug-ins for many of
    the user interface elements, which means that </para>
  </listitem>
  <listitem>
    <para>Ontopoly now has two new privileges: instance-reader and
    ontology-reader, which allows read-only users to be created.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed in Ontopoly:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1971"
    >Bug #1971</ulink>: Couldn't leave export page after doing
    export</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1939"
    >Bug #1939</ulink>: Search doesn't work on topicType.ted</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1849"
    >Bug #1849</ulink>: Search for empty string finds all topics</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1740"
    >Bug #1740</ulink>: Search returns duplicates</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1906"
    >Bug #1906</ulink>: Search crashes if string contains *</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1904"
    >Bug #1904</ulink>: Search dialog box too small on MSIE</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1884"
    >Bug #1884</ulink>: Description page shows no warning when
    locked</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1843"
    >Bug #1843</ulink>: System topics can be found by search and
    edited</para>
  </listitem>  
</itemizedlist>
</section>

<section>
<title>Vizigator</title>

<para>
The Vizigator has been extended slightly with two new pieces of
functionality, described below. Note that it was also substantially
extended in the OKS 3.1.1 release; you may want to check
<xref linkend="sect-3.1.1-viz"/> as well.
</para>

<itemizedlist>
  <listitem>
    <para>There is now support for stopping graphs which vibrate
    endlessly.</para>
  </listitem>
  <listitem>
    <para>There is now support for making all nodes sticky (or
    unsticky) in a single operation.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed in the Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1930"
    >Bug #1930</ulink>: Search only finds hits in visible names</para>
  </listitem> 
</itemizedlist>
</section>

<section>
<title>Omnigator</title>

<para>
The "No name topics" choice on the topic map page now always appears,
and without a count of nameless topics. This is a small step backwards
in terms of functionality, but this query is very expensive, and has
made it difficult to use the Omnigator with large topic maps. This
problem is now gone.
</para>

<para>
The following bugs have been fixed in Omnigator:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1894"
    >Bug #1894</ulink>: Stylesheet indentation problem</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1853"
    >Bug #1853</ulink>: Tomcat does not work with JRE on Windows</para>
  </listitem>  
</itemizedlist>
</section>

<section>
<title>Query Engine</title>

<para>
The tolog query engine now has support for plugging in external
full-text search predicates that behave much like the current built-in
"value-like" predicate. To create a new full-text search predicate,
one only needs to implement two Java interfaces. The new predicate
will then be available in a module which can be imported into queries
that need it.
</para>

<para>
The query engine now also supports getting a trace from a specific
query as a string, instead of logging it to log4j. This support is
available at the API level, and also in the Omnigator query plug-in.
This makes it much easier to debug slow tolog queries.
</para>

<para>
The following bugs have been fixed in the query engine:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1893"
    >Bug #1893</ulink>: Incorrect sort order with typed names</para>
  </listitem>  
</itemizedlist>
</section>

<section>
<title>DB2TM</title>

<para>
The main extension to DB2TM is the support for synchronizing the topic
map with new information from the database. This makes it easy to keep
the topic map up to date as the source database changes. See the
documentation for more details on how this works.
</para>

<para>
The DB2TM module has been extended with support for mapping values in
the database to new values using either a mapping table or a Java
method. These mappings can now be declared in the XML mapping file.
</para>
</section>

<section>
<title>Web Editor Framework</title>

<para>
The <symbol>webed:link</symbol> and <symbol>webed:form</symbol> tags
now have a new attribute, <symbol>target</symbol>, which tells the
framework in which window/frame to open the next page.  
</para>

<para>
The following bugs have been fixed in the Web Editor Framework:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1500"
    >Bug #1500</ulink>: <symbol>param</symbol> must be set on
    <symbol>webed:list</symbol> for multiple select lists</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1776"
    >Bug #1776</ulink>: Evaluate LTM action crashes if no topic map
    parameter given</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1760"
    >Bug #1760</ulink>: No output when <symbol>webed:field</symbol> is
    empty</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1756"
    >Bug #1756</ulink>: Crash when <symbol>params</symbol> attribute
    contains whitespace at beginning or end</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1869"
    >Bug #1869</ulink>: actions attached to
    <symbol>webed:list</symbol> with <symbol>unspecified=none</symbol>
    run even if no changes made</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1857"
    >Bug #1857</ulink>: package names for actions missing in
    documentation</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1848"
    >Bug #1848</ulink>: poor error message on missing actions.xml
    file</para>
  </listitem>  
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The <classname>TMLoginModule</classname> now exposes user-groups/roles
names and privilege names as role principals. This means that
applications can make use of the
<symbol>HttpServletRequest.isUserInRole(String rolename)</symbol>
method to check privileges and user-group memberships.
</para>
</section>

<section>
<title>Topic Maps Engine</title>

<para>
The TMSync implementation has been extended so that it now supports
using filter on the source topic map as well, to filter the
characteristics to be included in the synchronization.
</para>

<para>
The <classname>DeletionUtils</classname> class now has a new method
for deleting a collection of topics in a single operation. This is
much faster than deleting the topics individually.
</para>

<para>
The TM/XML exporter now accepts a filter that lets you control which
parts of the topic map should be exported.
</para>

<para>
The <interfacename>TopicMapSourceIF</interfacename> interface now has
a new method <methodname>createTopicMap</methodname>, which allows new
topic maps to be created within the source. Some of the source
implementations support this method, and there is a
<methodname>getSupportsCreate</methodname> method which can be used to
query for such support.
</para>

<para>
The XTM path source now has a boolean property to control whether
topic references to external documents should cause those documents to
be merged in. This is implemented using a new class
<classname>net.ontopia.topicmaps.utils.NoFollowTopicRefExternalReferenceHandler</classname>
which tells the XTM importer to not follow external topic references,
but to still load any topic maps referenced by the
<symbol>mergeMap</symbol> element.
</para>

<para>
The <symbol>Merger</symbol> command-line utility now has an option to
enable name-based merging (which used to be enabled, because of a
bug), and an option to do duplicate suppression on the resulting topic
map.
</para>

<para>
The following bugs have been fixed in the Topic Maps Engine:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1933"
    >Bug #1933</ulink>: TM/XML namespace prefixes not consistent</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1864"
    >Bug #1864</ulink>: Collection concurrency exceptions not
    documented</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1827"
    >Bug #1827</ulink>: LTM exporter creates numeric IDs</para>
  </listitem>  
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1850"
    >Bug #1850</ulink>: LTM importer can crash on subject
    identifier/source locator collision</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1868"
    >Bug #1868</ulink>: XTM reader crashes on empty topic references</para>
  </listitem>  
</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title>

<para>
A new property
<symbol>net.ontopia.topicmaps.impl.rdbms.Cache.shared.identitymap.lru</symbol>
has now been added, which can be used to control the size of the
identity map LRU for the shared cache independently from the LRUs of
the individual transactions.
</para>

<para>
Another new property is
<symbol>net.ontopia.infoset.fulltext.impl.rdbms.RDBMSSearcher.type</symbol>
which is used to control how full-text searching in the RDBMS backend
is done.
</para>

<para>
A new option has been added to the <symbol>RDBMSImport</symbol>
command-line tool, to control whether external references are followed
or not.
</para>

<para>
The RDBMS backend now always sets the transaction isolation level,
which it only did before when using a connection pool.
</para>
</section>

<!--
Engine

    WARNING: MergeUtils.merge(TopicMapIF,TopicMapIF) still does name-based merging by default.
-->
</section>

<!-- ======================================================================
     3.1.2                                                              -->
<section>
<title>OKS 3.1.2 release notes</title>

<para>This release primarily consists of some new functionality and a
couple of bug-fixes for Vizigator.  </para>

<section>
<title>Vizigator</title>

<para>
The following functionality has been added to Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para>It is now possible to hide the search bar by setting the
<symbol>search.bar</symbol> menufile property to
<symbol>off</symbol>.</para>
  </listitem>
</itemizedlist>

<para>
For more information, please consult the Vizigator User's Guide.
</para>

<para>
The following bugs have been fixed in Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1890"
    >Bug #1890</ulink>: Hide edge menu couldn't be controlled
    </para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1891"
    >Bug #1891</ulink>: Disappearing popup menu
    </para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor Framework</title>

<para>A problem regarding passing java.util.Map instances as
parameters to web editor actions was resolved.  </para>
</section>
</section>

<!-- ======================================================================
     3.1.1                                                              -->
<section>
<title>OKS 3.1.1 release notes</title>

<para>
This release primarily consists of some new functionality for
Vizigator, and support for Microsoft SQL Server. There is also
improved support for TM/XML in Omnigator.
</para>

<section>
<title>Topic Maps Engine</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1795"
    >Bug #1795</ulink>: TMAPI implementation bug
    </para>
  </listitem>  
  <listitem>
    <para>The server-config.wsdd file in the TMRAP web application
contained an absolute file reference. This has now been replaced by a
relative file reference.
    </para>
  </listitem>  
  <listitem>
    <para>One of the examples in the TMRAP Developer's Guide used an
incorrect request parameter.
    </para>
  </listitem>  
</itemizedlist>
</section>

<section id="sect-3.1.1-viz">
<title>Vizigator</title>

<para>
The following functionality has been added to Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para>A new (optional) locality algorithm has been added.</para>
  </listitem>
  <listitem>
    <para>The popup menu items in VizLet have been made configurable.</para>
  </listitem>
  <listitem>
    <para>The locality settings (initial setting, and maximum value)
    in VizLet have been made configurable.</para>
  </listitem>
  <listitem>
    <para>On topic nodes there is now a new "Copy name" menu item.</para>
  </listitem>
</itemizedlist>

<para>
For more information, please consult the Vizigator User's Guide.
</para>

<para>
The following bugs have been fixed in Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1870"
    >Bug #1870</ulink>: Some edges not shown
    </para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS backend</title>

<para>
The RDBMS backend has seen substantial internal reworkings that cause
it to need fewer database connections per transaction, and which
reduce lock contention in the database quite significantly. As a
result of these changes the RDBMS backend now supports Microsoft SQL
Server. A sample database properties file and database scripts can be 
found in <filename>${OKS_HOME}/rdbms</filename>.
</para>

</section>

<section>
<title>Omnigator</title>

<para>
It's now possible to drop TM/XML files with the extension .tmx into
the <filename>topicmaps</filename> directory and have Omnigator detect
them. It is also possible to topic maps to TM/XML in Omnigator using
the export plug-in.
</para>
</section>

</section>

<!-- ==========================================================================
     3.1.0                                                                  -->
<section>
<title>OKS 3.1.0 release notes</title>

<para>
This release adds significant new functionality, primarily the DB2TM
module and the new TMRAP version. However, the Vizigator has also been
significantly improved, support for the TM/XML format has been added
throughout the OKS, and an event API has been added to the engine. The
improvements are described in more detail below.
</para>

<!--
 - $OKS_HOME/lib/digests.txt includes the MD5 sum for each jar
   file. this can be used to check what jar files has changes between
   releases.

 - Documentation for the TM/XML syntax.
-->

<para>
Documentation of the two new modules (DB2TM and TMRAP) can be found as
part of the OKS documentation.
</para>

<section>
<title>Vizigator</title>

<para>
The Vizigator has been extended with support for a default topic and
association type configuration, as well as for controlling the
rendering of topics which have more than one type.
</para>

<para>
The following bugs have been fixed in the Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1767"
    >Bug #1767</ulink>: Filter changes are very slow
    </para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1768"
    >Bug #1768</ulink>: Hide node only hides incident edges
    </para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Topic Maps Engine</title>

<para>
The main improvements to the Topic Maps engine are the addition of
support for the TM/XML Topic Maps syntax and the event API. The event
API is documented in the javadoc for the package
<symbol>net.ontopia.topicmaps.core.events</symbol>.
</para>

<para>
The following bugs have been fixed in the Topic Maps engine:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1797"
    >Bug #1797</ulink>: RDF exporter crashes on null occurrences
    </para>
  </listitem>  
</itemizedlist>
</section>

<section>
<title>The RDBMS backend</title>

<para>
A number of performance improvements have been made to the RDBMS
backend. The RDBMS backend now distinguishes between read-only and
read-write transactions, where the former can be shared by several
users (because no changes can be made), thus reducing the memory
consumption. In addition, the use of synchronization has now been
streamlined to allow better throughput with many concurrent
transactions. The garbage collector now has an easier job because the
soft references in the shared cache are more fine-grained, making it
possible to collect smaller amounts of data on each iteration.</para>

<para>
The default tolog implementation when using the RDBMS backend is now
the in-memory implementation, and not the RDBMS implementation. Note
that this change might affect the performance of existing
installations. Existing installations may want to override the tolog
implementation in the database properties file.
</para>

<para>
The following bugs have been fixed in the RDBMS backend:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1818"
    >Bug #1818</ulink>: Query cache corruption when shared cache
    disabled
    </para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1792"
    >Bug #1792</ulink>: Shared cache corruption
    </para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1764"
    >Bug #1764</ulink>: Clearing cache causes error
    </para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1777"
    >Bug #1777</ulink>: XTM export causes OutOfMemoryException
    </para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
Two new methods have been added to the
<classname>NavigatorUtils</classname> class:
<methodname>getTopicMapRepository(PageContext
pageContext)</methodname> and
<methodname>getTopicMapRepository(ServletContext
servletContext)</methodname>.
</para>

<para>
The code which finds the label to display for a topic has been
replaced with a new implementation, which is much simpler, and much
faster, thus resulting in improved performance.
</para>

<para>
The following bugs have been fixed in the Navigator Framework:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1809"
    >Bug #1809</ulink>: Nested template tags do not work
    </para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor Framework</title>

<para>
The <classname>TologDelete</classname> action now accepts objects of
any types as parameters, and not just topics.
</para>

<para>
The following bugs have been fixed in the Web Editor Framework:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1821"
                 >Bug #1821</ulink>: The <symbol>webed:actionid</symbol>
    tag does not work correctly in read-only mode</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Ontopoly</title>

<para>
The following bugs in Ontopoly have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1842"
                 >Bug #1842</ulink>: Ontopoly crashes if more than one
    missing topic map</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1806"
                 >Bug #1806</ulink>: Ontopoly importer doesn't handle
    symmetric associations</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1808"
                 >Bug #1808</ulink>: Ontopoly importer doesn't handle
    reified topic maps</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1785"
    >Bug #1785</ulink>: Download choice on export has no effect</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1787"
    >Bug #1787</ulink>: Read-only topic types produce validation
    errors</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1784"
    >Bug #1784</ulink>: International characters lost on export</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1772"
    >Bug #1772</ulink>: Topic Maps sources without ID and title don't
    show up in Ontopoly</para>
  </listitem>
</itemizedlist>
</section>
</section>

<!-- ==========================================================================
     3.0.2                                                                  -->
<section>
<title>OKS 3.0.2 release notes</title>

<para>
This release is a bug fixing release for the Vizigator. The last few
versions of Vizigator have been somewhat buggy and unstable, and the
behaviour of the Vizigator has not really been entirely consistent.
This release fixes the known bugs, and makes the Vizigator behaviour
much more consistent. 
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1733"
                 >Collapse node doesn't work on focus node</ulink></para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1739"
                 >Expand node creates edges with no node on the other side</ulink></para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1741"
                 >Focus node does not reappear when filtered back in</ulink></para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1731"
                 >Filtering in associations creates edges with only
    one node</ulink></para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1751"
                 >Locality miscomputed with cycles</ulink></para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1750"
                 >Nodes at locality 2 removed in locality 2</ulink></para>
  </listitem>
</itemizedlist>
</section>

<!-- ==========================================================================
     3.0.1                                                                  -->
<section>
<title>OKS 3.0.1 release notes</title>

<para>This a bug-fix release that includes fixes to three bugs.</para>

<formalpara><title>Important:</title> 
<para>
If you are using the RDBMS Backend you should upgrade to this new
version as there is a critical bug in the jdbcspy driver shipped with
earlier OKS releases. This bug only occurs when using the jdbcspy
driver, but to be on the safe side an upgrade is recommended. If you
cannot upgrade then you must not use jdbcspy (disabled by default).
</para>
</formalpara>

<section>
<title>Topic Map Engine</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1438">Bug
    #1438</ulink>: The in-memory class-instance index had a bug that
    gave an incorrect result with null types.</para>
  </listitem>
</itemizedlist>
</section>

<section id="rdbms-301">
<title>RDBMS backend</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1757">Bug #1757</ulink>:
    The database scripts included a reference to a non-existent <symbol>reference_id</symbol>
    column.</para>
  </listitem>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1761">Bug #1761</ulink>:
    The jdbcspy driver contained a bug that caused transactions not to
    be rolled back in some situations.</para>
  </listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     3.0                                                                    -->
<section>
<title>OKS 3.0 release notes</title>

<para>
This release is a major release that has seen changes to most parts of
the OKS, as well as the inclusion of a major new component, the
Ontopoly Topic Maps editor. Also, the distribution now includes Tomcat
5.5, instead of Tomcat 5.0.
</para>

<formalpara><title>Important:</title> 
<para>
If you are using the RDBMS Backend you will have to make a few changes
to the database schema before proceeding. A description of how to do
the upgrade can be found in the section called <link
linkend="rdbms-300">RDBMS Backend</link> in this document.
</para>
</formalpara>

<section>
<title>Web Editor Framework</title>

<para>
A new policy for error handling in the Web Editor Framework has been
added, with support for distinguishing between critical and
non-critical errors. The only change is really that it is now possible
to report non-critical errors to the user.
</para>

<para>
The form tag library has been extended with better support for
accessing JSP attributes, which greatly simplifies using the form tag
library together with other tag libraries.
</para>

<para>
The <symbol>pattern</symbol> attribute has been added to the
<symbol>webed:field</symbol> tag, providing support for validating
user input against a regular expression.
</para>

<para>
The Velocity macros used by the Web Editor Framework tags have been
moved into the OKS .jar file. It is still possible to use custom
Velocity macros, but by default the macros used will be those in the
.jar file. This greatly simplifies upgrades to new OKS versions.
Existing applications will continue to use the Velocity macros in the
file system, which they have been configured to use. We recommend that
applications switch to using the .vm files in the .jar file.
</para>

<para>
The TLD files are now also stored in the OKS .jar file, and the tag
libraries have been given identifying URIs that can be used to load
these. We recommend that applications start using these URIs and
remove local copies of the TLD files.
</para>

<para>
The following new actions have been added to the Framework:
</para>

<itemizedlist>
  <listitem>
    <para><symbol>tmobject.OSLValidate</symbol> is an action which can
    take any number of topics, association, and topic maps and
    validate them against the OSL schema registered for the current
    topic map.</para>
  </listitem>
  <listitem>
    <para><symbol>topic.SetSubjectLocator</symbol> is an action for
    setting the subject locator of a topic.</para>
  </listitem>
  <listitem>
    <para>In addition, there are the
    <symbol>occurrence.SetValue2</symbol>,
    <symbol>occurrence.SetLocator2</symbol>, and
    <symbol>topic.SetSubjectIndicator2</symbol> actions, all of which
    are slight modifications of existing actions that behave
    differently when given an empty string (they delete the value
    being operated on).</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed in the Web Editor Framework:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1719">Bug #1719</ulink>:
    webed:actionid does not record current value correctly.</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1701">Bug #1701</ulink>:
    Velocity context clashes between web applications.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The tolog tag library has been extended with better support for
accessing JSP attributes, which greatly simplifies using the tolog tag
library together with other tag libraries. In addition, the
<symbol>tolog:set</symbol> tag now supports setting JSP attributes in
any scope (in addition to setting OKS variables), through the new
<symbol>scope</symbol> attribute.
</para>

<para>
The <symbol>tolog:out</symbol> tag now has an attribute named
<symbol>escape</symbol>, which can be used to control whether or not
the output string is to be HTML-escaped.
</para>

<para>
The TLD files are now stored in the OKS .jar file, and the tag
libraries have been given identifying URIs that can be used to load
these. We recommend that applications start using these URIs and
remove local copies of the TLD files.
</para>

<para>
The <filename>tm-sources.xml</filename> can now be loaded from the
classpath, and in the distribution this is where it is now loaded
from.
</para>
</section>

<section>
<title>Vizigator</title>

<para>
The Vizigator has been extended with support for filtering
associations by scope. It also now has support for localization, and
has been localized to Japanese and German.
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1690">Bug #1690</ulink>:
    Opening non-existent file causes crash.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Topic Map Engine</title>

<para>
The engine now supports typed names, in accordance with the TMDM.
</para>

<para>
The engine now supports automatically keeping the full-text index for
a topic map up to date as changes are made to a topic map. This is
primarily of interest with in-memory topic maps.
</para>

<para>
The topic map repository framework has now been extended so that topic
map sources can create new topic maps. New methods have been added to
the <interfacename>TopicMapSourceIF</interfacename> interface to
support this. The <classname>XMLConfigSource</classname> class has
also been extended with new methods to allow the configuration to be
loaded from the classpath.
</para>

<para>
The following new additions have been made to the API:
</para>

<itemizedlist>
  <listitem>
    <para>The <methodname>setFollowTopicRefs</methodname> method has
    been added to the <classname>XTMTopicMapReader</classname>, making
    it easier to prevent the XTM reader loading other XTM documents
    referred to by <symbol>topicRef</symbol> elements.</para>
  </listitem>
  <listitem>
    <para>The <classname>XTMTopicMapWriter</classname> can now be
    given a <interfacename>DeciderIF</interfacename> which will be
    used to filter the topic map during export.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed in the engine:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1726">Bug #1726</ulink>:
    RDF2TM inserts unwanted topics.</para>
  </listitem>
</itemizedlist>
</section>

<section id="rdbms-300">
<title>RDBMS backend</title>

  <section>
    <title>Upgrading the database schema</title>

    <para>There has been a few minor changes to the database schema in
    this release. In order to upgrade your database instance you will
    have to execute the SQL statements listed below in your database.</para>

    <para>If you do not have an existing database instance you should
    not perform the upgrade shown below, but instead follow the
    standard database installation procedure described in
    <emphasis>The RDBMS Backend Connector - Installation
    Guide</emphasis>.</para>

  </section>

  <section>
    <title>PostgreSQL</title>

<para>Use the <command>psql</command> command line tool to execute the
statements below, or any other database access tool of your
choice.</para>

<literallayout>
  alter table TM_BASE_NAME add column type_id integer null;
  alter table TM_TOPIC_MAP add column base_address varchar(512) null;
  alter table TM_TOPIC_MAP add column title varchar(128) null;
  create index TM_BASE_NAME_IX_myi on TM_BASE_NAME(topicmap_id,type_id,id);
</literallayout>

<para>If foreign keys are enabled the following command should also be issued:</para>

<literallayout>
  alter table TM_BASE_NAME add constraint FK_TM_BASE_NAME_3 foreign key (type_id) references TM_TOPIC (id);
</literallayout>
</section>

   <section>
     <title>Oracle</title>

<para>Use the <command>sqlplus</command> command line tool to execute
the statements below, or any other database access tool of your
choice.</para>

<literallayout>
   alter table TM_BASE_NAME add type_id integer null;
   alter table TM_TOPIC_MAP add base_address varchar2(512) null;
   alter table TM_TOPIC_MAP add title varchar2(128) null;
   create index TM_BASE_NAME_IX_myi on TM_BASE_NAME(topicmap_id,type_id,id);
</literallayout>

<para>If foreign keys are enabled the following command should also be issued:</para>

<literallayout>
   alter table TM_BASE_NAME add constraint FK_TM_BASE_NAME_3 foreign key (type_id) references TM_TOPIC (id);
</literallayout>
</section>

  <section>
    <title>Other changes in this release</title>

<para>
The RDBMS backend schema has changed to support typed names.
</para>

<para>
The RDBMS backend schema has changed to store the base address of the
topic map in the database. This solves the long-standing problem with
porting ID-based topic maps applications from the in-memory store to
the RDBMS backend, since the base address is now set on import (using
the <classname>RDBMSImport</classname> command-line tool) ID-based
references will continue to work.
</para>

<para>
The <classname>RDBMSImport</classname> command-line tool can now
produce a SQL profiling report to show where the time is spent during
an import.
</para>

<para>
The <classname>RDBMSImport</classname> command-line tool will now
automatically disable the shared cache, so that topic map documents of
any size can be imported.
</para>

<para>
The <classname>RDBMSTopicMapStore</classname> now has a new method
that can dump the identity map, for debugging and performance
monitoring purposes.
</para>

<para>
The
<symbol>net.ontopia.topicmaps.impl.rdbms.StorePool.SoftMaximum</symbol>
database property was being incorrectly set, effectively making
impossible to set an upper boundary on the store pool size. This is
now fixed.
</para>

</section>

</section>
</section>

<!-- ==========================================================================
     2.2.4                                                                  -->
<section>
<title>OKS 2.2.4 release notes</title>

<para>
This is mainly a bug fix release, but also includes a number of
improvements.
</para>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The dynamic association predicate now does prefetching when
    all role player arguments are unbound.</para>
  </listitem>
  <listitem>
    <para>An existing log4j system can now be used by web
    applications. This can be done by not specifying the
    <symbol>log4j_config</symbol> context parameter in web.xml.</para>
  </listitem>
  <listitem>
    <para>Web Editor tags webed:button, webed:checkbox, webed:field,
    webed:file, webed:form, webed:link and webed:list now take the
    <symbol>class</symbol> attribute which maps directly to an HTML
    class attribute.</para>
  </listitem>
  <listitem>
    <para>The user-interface language used in the Vizigator and the
    Vizlet is now configurable. The Vizigator takes an applet
    parameter called <symbol>lang</symbol> and the Vizlet takes a
    command line argument with the same name. The default value is
    <symbol>en</symbol>.</para>
  </listitem>
  <listitem>
    <para>Vizlet controls can now be hidden when the applet is
    loaded. This can be done by setting the
    <symbol>controlsVisible</symbol> applet parameter to
    <symbol>false</symbol>. Note that it is possible to get the
    controls back by selecting the appropriate entry in the context
    menu.</para>
  </listitem>
</itemizedlist>


<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1719">Bug
    #1719</ulink>: The webed:actionid registered the current value incorrectly.</para>
  </listitem>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1554">Bug
    #1554</ulink>: Deadlock problem in TouchGraph fixed.</para>
  </listitem>
  <listitem>
    <para>Fixed Vizigator bug that caused a NullPointerException to be
    thrown when association roles did not have a role player.</para>
  </listitem>
  <listitem>
    <para>NoSuchElementExceptions where constructed and thrown too
    eagerly internally inside one of the RDBMS Backend collection
    implementations. This is no longer done and leads to better
    performance.</para>
  </listitem>
  <listitem>
    <para>Database connections were not always returned to connection
    pool when topic map store was invalidated. In some situations this
    caused the connection pool to run out if connections quickly,
    while in others it would take a long time.</para>
  </listitem>
</itemizedlist>

</section>

<!-- ==========================================================================
     2.2.3                                                                  -->
<section>
<title>OKS 2.2.3 release notes</title>

<para>
This is a bug fix and optimization release. A number of bug fixes and
performance improvements have been made to the RDBMS backend. If you
are not using the RDBMS backend, you can ignore this release. If you
are using the RDBM backend we <emphasis>strongly recommend</emphasis>
that you upgrade to this version.
</para>

<para>
In this release, only the OKS code and the database schemas/scripts
have been updated. To upgrade an existing installation, all you need
to do is replace the <filename>oks-*.jar</filename> file.
</para>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>A memory leak in the RDBMS caches has been fixed.</para>
  </listitem>
  <listitem>
    <para>Data sources retrieved through JNDI must now have absolute
    JNDI names, not relative as in previous releases. The OKS will now
    also explicitly set the <symbol>autoCommit</symbol> flag to false,
    overriding any defaults.</para>
  </listitem>
  <listitem>
    <para>The representation of object identities has been optimized,
    so that it now takes much less memory.</para>
  </listitem>
  <listitem>
    <para>A number of optimizations have been made in the backend,
    some of which dramatically improve performance for multiple
    simultaneous transactions. A side-effect is that the RDBMS backend
    may now more JDBC connections than in previous releases.</para>
  </listitem>
  <listitem>
    <para>The XTM importer has been optimized so that, when importing
    into the RDBMS backend, creation of topics is delayed, in order to
    see whether the topic already exists. This avoids merging in a
    number of cases, and can dramatically improve performance when
    importing new data from XTM into an existing database.</para>
  </listitem>
  <listitem>
    <para>Some modifications have been made to the default RDBMS
    schemas, such as making foreign key constraints deferrable, and
    some improvements to the default indexes.</para>
  </listitem>
  <listitem>
    <para>The database drop script now also drops constraints.</para>
  </listitem>
</itemizedlist>
</section>

<!-- ==========================================================================
     2.2.2                                                                  -->
<section>
<title>OKS 2.2.2 release notes</title>

<para>
This is a bug fix release.
</para>

<section>
<title>Query Engine</title> <!-- QUERY ENGINE -->

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1507">Bug
    #1507</ulink>: Query with role-player and type gives no results</para>
  </listitem>
  <listitem>
    <para>The dynamic association predicate failed with a
    NullPointerException in some situations where the player of an
    association role was null.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title> <!-- RDBMS BACKEND -->

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1509">Bug
    #1509</ulink>: OutOfMemoryExceptions on large imports</para>
  </listitem>
  <listitem>
    <para>Importing large topic maps caused
    OutOfMemoryExceptions. This effectively prevented one from
    running imports larger than the available memory.</para>
  </listitem>
</itemizedlist>
</section>
</section>

<!-- ==========================================================================
     2.2.1                                                                  -->
<section>
<title>OKS 2.2.1 release notes</title>

<para>
This is a bug fix release.
</para>

<section>
<title>Engine</title> <!-- ENGINE -->

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The LTM importer now makes sure that older topics are
    preferred over newer topics when merging. This change leads to
    better performance in most situations as older topics usually have
    more characteristics than newer ones.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1339">Bug
    #1339</ulink>: RDF import does not support rdf:nodeID</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Vizigator</title> <!-- VIZIGATOR -->

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1465">Bug
    #1464</ulink>: Collapse leaves isolated nodes</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1428">Bug
    #1428</ulink>: Hide node can split graph</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title> <!-- NAVIGATOR FRAMEWORK -->

<para>
The following improvements have been made to the Navigator Framework:
</para>


<itemizedlist>
  <listitem>
    <para>The JAAS authentication module now provides role names to the
    application container. The unscoped user group names are provided
    as role names.</para>
  </listitem>

  <listitem>
    <para>The JAAS authentication module classes are now provided in a
    separate jar file:
    <filename>$TOMCAT_HOME/server/lib/oks-realm.jar</filename>.</para>
  </listitem>

  <listitem>
    <para>A few new utility methods were added to make it easier to
    use the framework in servlets: an overloaded version of
    <methodname>run</methodname> in <classname>TreeWidget</classname>
    and of <methodname>getSingleValue</methodname> in
    <classname>ContextUtils</classname>.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor Framework</title> <!-- WEBED FWK -->

<para>
The following improvements have been made to the Web Edit Framework:
</para>

<itemizedlist>
  <listitem>
    <para>User form data will now expire after a set interval, even if
    the session as a whole has not expired, and even if the form has
    not been closed. This reduces the memory usage with large forms
    and many concurrent users.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1471">Bug
    #1471</ulink>: Data in other actions not available when triggered
    action is exclusive</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title> <!-- RDBMS BACKEND -->

<para>
The following improvements have been made to the RDBMS backend:
</para>

<itemizedlist>
  <listitem>
    <para>The database creation scripts now include a number of new
    indexes that greatly improve performance with the new queries used
    by the pre-fetching code.</para>
  </listitem>

  <!--listitem>
    <para>The <methodname>writeReport</methodname> and
    <methodname>clearCache</methodname> methods have been added to the
    <classname>RDBMSTopicMapStore</classname> class, providing better
    control and introspection of the RDBMS caches.</para>
  </listitem-->

  <listitem>
    <para>All database connections are now validated before starting
    new topic map transactions. The shared cache is also able to
    detect that the database is down and attempt to acquire a new
    connection. This change means that the shared cache, or JVM, does
    not have to be restarted when the backing database has been
    reset.</para>
  </listitem>

  <listitem>
    <para>The trove4j library has been upgraded
    (<filename>trove.jar</filename>).</para>
  </listitem>

</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1466">Bug
    #1466</ulink>: Role type cache crashes when no shared cache</para>
  </listitem>
  <listitem>
    <para>JDBCSpy would in some cases produce a driver even if the
    JDBC URL did not match.</para>
  </listitem>
</itemizedlist>
</section>
</section>

<!-- ==========================================================================
     2.2                                                                    -->
<section>
<title>OKS 2.2 release notes</title>

<para>
This release adds substantial new functionality, primarily significant
performance enhancements in the RDBMS backend, but also support for
LTM 1.3, the JAAS module, and the accessctl web application. More
detail on these is provided below. There are some violations of
backwards compatibility, so please read the release notes carefully.
</para>

<section>
<title>Omnigator</title> <!-- OMNIGATOR -->

<para>
The Omnigator now supports exporting topic maps to LTM format.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1278">Bug
    #1278</ulink>: Encoding problem in Omnigator's Add plug-in</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1420">Bug
    #1420</ulink>: Omnigator's Query plug-in garbles non-ASCII
    characters</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1423">Bug
    #1423</ulink>: Omnigator's Query plug-in doesn't reuse the
    QueryProcessor object</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title> <!-- NAVIGATOR FRAMEWORK -->

<para>
The following improvements have been made to the Navigator Framework:
</para>

<itemizedlist>
  <listitem>
    <para>A JAAS module for user authentication in application servers
    against user information stored in the topic map has been added. A
    web application for maintaining user information has also been
    added. Documentation for these two components is provided.</para>
  </listitem>

  <listitem>
    <para>The configuration of shared repositories has been
    significantly simplified. In particular, the need to directly
    reference the <filename>tm-sources.xml</filename> file has been
    reduced.</para>
  </listitem>

  <listitem>
    <para>The methods NavigatorApplicationIF.getConfigurations(),
    NavigatorApplicationIF.getName() and
    NavigatorApplicationIF.getInstanceOf(String) has been marked
    INTERNAL.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1416">Bug
    #1416</ulink>: tolog:set unwraps collection value in non-OKS scope</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1404">Bug
    #1404</ulink>: Cannot have tolog:set tags with implicit var attribute</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Vizigator</title> <!-- VIZIGATOR -->

<para>
The following improvements have been made to the Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para>Loading big topic maps in VizDesktop is now much easier, as
    a dialog box showing progress is shown, and a start topic can be
    chosen without having to view the entire topic map. Building of
    the topic map graph is now done "on demand", which means that with
    a start topic getting started with a large topic map is much
    faster.</para>
  </listitem>

  <listitem>
    <para>The VizDesktop now supports setting name scopes to control
    which names are shown on topics. There is a corresponding
    configuration parameter in the Vizlet, and the setting is stored
    in the configuration.</para>
  </listitem>

  <listitem>
    <para>The file size of the Vizlet jar file has been reduced by
    about 30%, which should reduce the Vizlet startup time.</para>
  </listitem>

  <listitem>
    <para>If two topics are related by two associations the
    associations will no longer appear on top of each other so that
    only one can be seen, but will instead curve out to avoid this.
    </para>
  </listitem>
</itemizedlist>


<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1302">Bug
    #1302</ulink>: Hiding or collapsing a node can make a ghost node</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1392">Bug
    #1392</ulink>: Error message because log4j.properties not found</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1415">Bug
    #1415</ulink>: Map view menu choice enabled when in map view</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor Framework</title> <!-- WEBED -->

<para>
The following improvements have been made to the Web Editor Framework:
</para>

<itemizedlist>
  <listitem>
    <para>The <symbol>forwardBehaviour</symbol> element is no longer
    allowed in <filename>actions.xml</filename>. This because the
    machinery for multi-frame applications has been signficantly
    changed.</para>
  </listitem>

  <listitem>
    <para>The documentation of the
    <classname>AssignRolePlayer</classname> action has been
    signficantly extended.</para>
  </listitem>

  <listitem>
    <para>Documentation of on how to make the
    <classname>ProcessServlet</classname> produce log output has been
    added, and the logging itself improved.</para>
  </listitem>

  <listitem>
    <para>The <symbol>actionGroup</symbol> attribute has been
    <emphasis>removed</emphasis> from the 
    <symbol>webed:actionid</symbol> tag.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1412">Bug
    #1412</ulink>: Incorrect handling of button icon paths</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1401">Bug
    #1401</ulink>: Poor error message when no &lt;forwardDefault> provided</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1400">Bug
    #1400</ulink>: Locking forwarding not done correctly</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1356">Bug
    #1356</ulink>: Action data expires too easily</para>
  </listitem>

  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1396">Bug
    #1396</ulink>: <symbol>trim</symbol> attribute on
    <symbol>webed:field</symbol> does not work</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title> <!-- QUERY ENGINE -->

<para>
The following improvements have been made to the Query Engine:
</para>

<itemizedlist>
  <listitem>
    <para>The query engine now checks queries for type conflicts
    (incorrect types of arguments to predicates) and will report any
    type conflicts as errors. This may cause existing queries to fail,
    but always because there is a bug in the query.</para>
  </listitem>

  <listitem>
    <para>Looking up occurrences via their string values, using either
    the <symbol>value</symbol> predicate or dynamic occurrence
    predicates is now significantly optimized.</para>
  </listitem>

  <listitem>
    <para>A number of optimizations have been added to the in-memory
    query processor. In addition, the in-memory query processor will
    now prefetch information not in the cache from the RDBMS, which
    significantly improves performance when using the RDBMS backend.
    Dynamic association predicates should also be much faster.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1143">Bug
    #1143</ulink>: Lookahead error in tolog parser</para>
  </listitem>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1453">Bug
    #1453</ulink>: subject-locator predicate binds to null</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Topic Map Engine</title> <!-- TM ENGINE -->

<para>
The following new functionality has been added to the engine:
</para>

<itemizedlist>
  <listitem>
    <para>The <methodname>getRolesByType(TopicIF)</methodname> and
    <methodname>getRolesByType(TopicIF, TopicIF)</methodname> methods
    has been added to the <interfacename>TopicIF</interfacename>
    interface. This can be convenient in some cases, and is used to
    improve the performance of the RDBMS backend.</para>
  </listitem>

  <listitem>
    <para>The support for <ulink
    url="http://www.tmapi.org/">TMAPI</ulink> has now been
    finalized. The OKS now has full support for TMAPI 1.0.
    </para>
  </listitem>

  <listitem>
    <para>The LTM parser has been updated to support LTM 1.3.</para>
  </listitem>

  <listitem>
    <para>The
    <classname>net.ontopia.topicmaps.xml.CanonicalXTMWriter</classname>
    class has been added, with support for the 2004-11-01 draft of
    Canonical XTM.</para>
  </listitem>

  <listitem>
    <para>The
    <classname>net.ontopia.topicmaps.utils.ltm.LTMTopicMapWriter</classname>
    class has been added, with support for exporting topic maps to LTM 1.3.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1418">Bug
    #1418</ulink>: data URLs do not support non-ASCII characters</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title> <!-- RDBMS BACKEND -->

<para>
The following improvements have been made to the RDBMS backend:
</para>

<itemizedlist>
  <listitem>
    <para>The RDBMS backend will now prefetch information not in the
    cache in a number of situations, which significantly improves
    performance. The difference is likely to be most noticeable when
    using in-memory tolog.</para>
  </listitem>

  <listitem>
    <para>Index lookups (through the API or via tolog) would always
    cause two SQL queries in the database. This has now been optimized
    to only do a single SQL query.</para>
  </listitem>

  <listitem>
    <para>Documentation of how to use P6Spy to do SQL profiling has
    been added, together with a script for producing reports from the
    P6Spy logs.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1398">Bug
    #1398</ulink>: NullPointerException when closing RDBMS store</para>
  </listitem>
</itemizedlist>
</section>
</section>


<!-- ==========================================================================
     2.1.1                                                                  -->
<section>
<title>OKS 2.1.1 release notes</title>

<para>
This release is almost exclusively a bug fix release.
</para>

<section>
<title>Omnigator</title> <!-- OMNIGATOR -->

<para>
The following changes have been made to the Omnigator:
</para>

<itemizedlist>
  <listitem>
    <para>The user interface of the RDF2TM plug-in has been improved
    slightly.</para>
  </listitem>

  <listitem>
    <para>The full-text indexer now considers digits parts of tokens,
    which it did not previously. This means old indexes should be
    recreated.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para>Not all plug-ins closed the topic map store the way they
    should; this has now been fixed.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title> <!-- NAVIGATOR FRAMEWORK -->

<para>
Only one change has been made here: the "oks" JSP variable is now set
in request scope instead of page scope.
</para>
</section>

<section>
<title>Vizigator</title> <!-- VIZIGATOR -->

<para>
Two bugs have been fixed in the Vizigator:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1369">
    Bug #1369</ulink>: NPE on bad topic maps</para>
  </listitem>

  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1376">
    Bug #1376</ulink>: Right-click does not work on MacOS X</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor Framework</title> <!-- WEBED -->

<para>
The following changes have been made to the Web Editor Framework:
</para>

<itemizedlist>
  <listitem>
    <para>The <symbol>trim</symbol> attribute has been added to the
    <symbol>webed:field</symbol> tag to control whether whitespace is
    removed from its contents or not. (Bug #1374.)</para>
  </listitem>

  <listitem>
    <para>The <symbol>runIfNoChanges</symbol> attribute has been added
    to the <symbol>webed:invoke</symbol> tag to control whether
    the invoked action is to be run if no other actions run.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1373">Bug
    #1373</ulink>: Problems with certain webed tags and
    <symbol>jsp:include</symbol>.</para>
  </listitem>

  <listitem>
    <para>NPE in ActionSignature in certain cases.</para>
  </listitem>

  <listitem>
    <para>NoSuchElement exception in EvaluateLTM action on topics with
    no source locator.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title> <!-- QUERY ENGINE -->

<para>
The RDBMS tolog implementation now makes better use of the optimizers
developed for the in-memory implementation, which should improve
performance in some cases.
</para>

<para>
One bug has been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1378">Bug
    #1378</ulink>: NPE when sorting on topics with null-value names</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Topic Map Engine</title> <!-- TM ENGINE -->

<para>
The following API changes have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The <methodname>clear</methodname> method has been added to
    the <interfacename>TopicMapReferenceIF</interfacename>
    interface.</para>
  </listitem>

  <listitem>
    <para>The <methodname>delete</methodname> method on the
    <interfacename>TopicMapStoreIF</interfacename> interface has been
    deprecated.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title> <!-- RDBMS BACKEND -->

<para>
One bug has been fixed:
</para>

<itemizedlist> 
  <listitem>
    <para>The <methodname>delete</methodname> method on
    <classname>RDBMSTopicMapStore</classname> would in some cases
    leave orphan rows in the <symbol>*_SCOPE</symbol> tables.</para>
  </listitem>
</itemizedlist>
</section>
</section>


<!-- ==========================================================================
     2.1                                                                    -->
<section>
<title>OKS 2.1 release notes</title>

<para>
This release adds major new functionality, substantial internal
changes, as well an overhaul of the API where many packages and
classes are made INTERNAL or deprecated. You are recommended to read
this section carefully before installing this version.
</para>

<section>
<title>Omnigator</title> <!-- OMNIGATOR -->

<para>
The Omnigator now has two new plug-ins:
</para>

<itemizedlist>
  <listitem>
    <para>VizPlugin, which provides a visual view of the surroundings
    of a given topic in the topic map, using Vizigator.</para>
  </listitem>

  <listitem>
    <para>RDF2TM, which can be used to create RDF-to-topic map
    mappings using a graphical interface.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1224">Bug
    #1224</ulink>: Merge button causes error when no topic map selected</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title> <!-- NAVIGATOR FRAMEWORK -->

<para>
The <symbol>tm</symbol>, <symbol>logic</symbol>,
<symbol>output</symbol>, and <symbol>value</symbol> tag libraries have
now been deprecated, in favour of the new <symbol>tolog</symbol> tag
library. The old tag libraries and their documentation are still
included with the OKS, but they are now officially deprecated, and no
new functionality should be developed using them. They will not be
removed from the product as long as there are users for them.
</para>

<para>
There are also some important changes in how the Navigator Framework
works with the RDBMS backend; these are documented in section 3.5 of
the Navigator Framework Developer's Guide, and all users are
encouraged to read this section.
</para>

<para>
Parts of the Navigator Framework API have been marked as INTERNAL or
been deprecated. A few methods that have been deprecated for a long
time have been removed altogether. The following class has also been
added to the API.
</para>

<itemizedlist>
  <listitem>
    <para>The
    <classname>net.ontopia.topicmaps.nav2.utils.TreeWidget</classname>
    class has been added.</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Vizigator</title> <!-- VIZIGATOR -->

<para>
The Vizigator is now out of beta, and officially part of the OKS. A
substantial number of bugs have been fixed, and new functionality
added. We do not describe the details here; for a description of the
functionality, see the Vizigator User's Guide.
</para>
</section>

<section>
<title>Web Editor Framework</title> <!-- WEBED -->

<para>
The <symbol>params</symbol> attribute in the Web Editor Framework tag
library now supports tolog URI prefixes declared with the new
<symbol>tolog:declare</symbol> tag. This makes it possible to refer to
topics without creating framework variables for them first.
</para>

<para>
The action implementations included in the Web Editor Framework now
perform much stricter checking on the parameters passed to them, which
means that they provide much more useful error messages, but also that
in certain cases they will complain about parameters they would
earlier allow.
</para>

<para>
The <classname>AddSubjectIndicator</classname>, 
<classname>RemoveSubjectIndicator</classname>,
<classname>SetSubjectIndicator</classname>, 
<classname>AddSourceLocator</classname>, 
<classname>RemoveSourceLocator</classname>, and
<classname>SetSourceLocator</classname> actions have been updated to
accept string parameters as well as locator parameters.
</para>

<para>
Parts of the API have been marked as INTERNAL or been deprecated in
this version. In addition, the
<methodname>cloneAndOverride</methodname> method has been added to the
<interfacename>ActionParametersIF</interfacename> interface to make it
possible to trigger existing actions from within an action.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1289">Bug
    #1289</ulink>: Certain exceptions in actions would make the OKS go
    into a non-responsive state.</para>
  </listitem>

  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1252">Bug
    #1252</ulink>: Actions would always be triggered in multiselect lists</para>
  </listitem>

  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1251">Bug
    #1251</ulink>: Actions nested within buttons would not be invoked</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title> <!-- QUERY ENGINE -->

<para>
The tolog query language has been extended with comparator predicates
(that is, the normal <symbol>&lt;</symbol>, <symbol>&gt;</symbol>,
<symbol>=</symbol>, <symbol>&lt;=</symbol>, <symbol>&gt;=</symbol>
operators). In addition, the <symbol>object-id</symbol> predicate has
been added.
</para>

<para>
The query engine has been reworked somewhat internally, adding some
new optimizations, as well as type analysis on variables. This is not
obvious to external code, but improves performance.
</para>

<para>
An API for preparsing declarations (as opposed to queries) and storing
the resulting context so that later queries can be parsed in a
particular declaration context has been added.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1264">Bug
    #1264</ulink>: Exception thrown when second parameter to dynamic
    occurrence predicate of wrong type</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1293">Bug
    #1293</ulink>: Incorrect result in dynamic association predicate
    query with inconsistent association signatures</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1290">Bug
    #1290</ulink>: subject-locator predicate cannot start from URL</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Schema Tools</title> <!-- SCHEMA TOOLS -->

<para>
Parts of the API have been marked as INTERNAL or been deprecated.
</para>
</section>

<section>
<title>Full-text Integration</title> <!-- FULL-TEXT -->

<para>The <symbol>oracle_text</symbol> platform must now be listed on
the <symbol>net.ontopia.topicmaps.impl.rdbms.Platforms</symbol>
database property for Oracle Text support to be enabled, e.g. to
enable Oracle Text support with Oracle 10g set the property to
<symbol>oracle_text,oracle10g,oracle,generic</symbol>. This change
will break backward compatibility, but will allow Oracle users to use
the default rdbms fulltext support using the LIKE operator instead of
using Oracle Text. See the fulltext developers guide for more
information.</para>

<para>The <symbol>LuceneIndexer</symbol> class now has a new command
line option <symbol>--analyzer</symbol> which takes the class name of
an analyzer.</para>

<para>
Parts of the API have been marked as INTERNAL or been deprecated.
</para>
</section>

<section>
<title>Topic Map Engine</title> <!-- TM ENGINE -->

<para>
The core interfaces of the engine have now changed substantially, for
the first time since the release of version 1.0. Concepts left over
from the HyTM syntax have now officially been deprecated, such as
facets, facet values, mnemonics, effective scope, and scope on topics
and topic maps. If you didn't know these things existed: don't worry,
the effect on your code is likely to be nil. In addition, a large
number of non-core interfaces, classes, and methods have been marked
as INTERNAL or been deprecated. 
</para>

<para>
In addition, the following API changes have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The <methodname>close</methodname> method has been added to
    the <interfacename>TopicMapRepositoryIF</interfacename>
    interface.</para>
  </listitem>

  <listitem>
    <para>The <symbol>lenient</symbol> property on the RDF path topic
    map source has been added, making it possible to ignore some
    errors in the RDF mappings.</para>
  </listitem>

  <listitem>
    <para>The <classname>DuplicateSuppressionUtils</classname> class
    has a new method called
    <methodname>removeDuplicateAssociations</methodname> which will
    remove all duplicate associations of a particular topic.</para>
  </listitem>
</itemizedlist>

<para>
Some performance optimizations have been made in import and export:
</para>

<itemizedlist>
  <listitem>
    <para>The LTM and XTM importers are now faster when the imported
    files cause topic merges, because they have been modified to avoid
    merges in situations where it can be avoided.</para>
  </listitem>

  <listitem>
    <para>Export to XTM should now be quite a bit faster, as the
    performance of XML generation has been improved.</para>
  </listitem>
</itemizedlist>

<para>
The <symbol>net.ontopia.topicmaps.entry</symbol> package has been
reworked a bit, and the following changes have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The <interfacename>TopicMapReferenceIF</interfacename>
    interface now has two new methods: <methodname>open</methodname>
    and <methodname>isDeleted</methodname>.</para>
  </listitem>

  <listitem>
    <para>The <interfacename>TopicMapReferenceIF</interfacename>
    interface now throws a <symbol>StoreDeletedException</symbol> if
    the topic map has been deleted.</para>
  </listitem>

  <listitem>
    <para>Topic map references can now be reopened after they have
    been closed.</para>
  </listitem>

  <listitem>
    <para>Most implementations of
    <interfacename>TopicMapReferenceIF</interfacename> no longer
    delete the file in the file system when
    <methodname>delete</methodname> is called unless the
    <symbol>deleteFiles</symbol> property is set to true.</para>
  </listitem>
</itemizedlist>

<para>Locators output by XTM, CXTM and HyTM serializers are now
written in its external form and no longer the internal form.</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist> 
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1247">Bug
    #1247</ulink>: InternalAssociation.getAssociationTypeId throws NPE</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1325">Bug
    #1325</ulink>: ClassInstanceIndex contains unconnected topics</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1317">Bug
    #1317</ulink>: RDF mapping file topics included in TM</para>
  </listitem>
</itemizedlist> 

</section>

<section>
<title>RDBMS Backend</title> <!-- RDBMS BACKEND -->

<para>
The internals of the RDBMS backend have been substantially reworked to
provide better support for concurrent transactions. A number of RDBMS
properties have been added to control the internal workings of this.
To find out what these are, please consult the RDBMS Backend
Installation Guide and the Developer's Guide. Note also that some
behaviours that never were allowed, but which used not to cause
problems now <emphasis>will</emphasis> cause problems. Caution, and
careful testing, should be applied.
</para>

<para>The two main new features in the RDBMS Backend are shared cache
and topic map store pooling. The first lets topic map store instances
share information so that the network traffic to the database is
reduced and thus performance improved. The second feature makes it
possible to reuse topic map store instances across transactions. This
improves scalability in multi-user access to the database and will
also improve resource management in applications.</para>

<para>A few new database properties has been added. All the properties
are related to either shared cache settings or topic map store
pooling. See the RDBMS Installation Guide for more in-depth
information on the supported database properties.</para>

<itemizedlist>
  <listitem>
    <para>net.ontopia.topicmaps.impl.rdbms.Cache.shared</para>
    <para>net.ontopia.topicmaps.impl.rdbms.Cache.identitymap.lru</para>
    <para>net.ontopia.topicmaps.impl.rdbms.Cache.subjectidentity.srcloc.lru</para>
    <para>net.ontopia.topicmaps.impl.rdbms.Cache.subjectidentity.subind.lru</para>
    <para>net.ontopia.topicmaps.impl.rdbms.Cache.subjectidentity.subloc.lru</para>
    <para>net.ontopia.topicmaps.impl.rdbms.StorePool.MinimumSize</para>
    <para>net.ontopia.topicmaps.impl.rdbms.StorePool.MaximumSize</para>
    <para>net.ontopia.topicmaps.impl.rdbms.StorePool.SoftMaximum</para>
  </listitem>
</itemizedlist>

<para>The following properties are no longer supported/used, so if you
use them in your database properties file consider removing
them:</para>

<itemizedlist>
  <listitem>
    <para>net.ontopia.topicmaps.impl.rdbms.ConnectionPool.InitialSize</para>
    <para>net.ontopia.topicmaps.impl.rdbms.ConnectionPool.Timeout</para>
    <para>net.ontopia.topicmaps.impl.rdbms.ConnectionPool.UserTimeout</para>
    <para>net.ontopia.topicmaps.impl.rdbms.ConnectionPool.SkimmerFrequency</para>
    <para>net.ontopia.topicmaps.impl.rdbms.ConnectionPool.ShrinkBy</para>
    <para>net.ontopia.topicmaps.impl.rdbms.ConnectionPool.TransactionIsolationLevel</para>
    <para>net.ontopia.topicmaps.impl.rdbms.MappingFile</para>
    <para>net.ontopia.topicmaps.impl.rdbms.QueriesFile</para>
  </listitem>
</itemizedlist>


<para>The following properties are only used for database platforms
for which there are no built-in support, and should therefore not
normally be specified in database properties:</para>

<itemizedlist>
  <listitem>
    <para>net.ontopia.persistence.query.sql.InMaxElements</para>
    <para>net.ontopia.topicmaps.impl.rdbms.KeyBlockSize</para>
    <para>net.ontopia.topicmaps.impl.rdbms.HighLowKeyGenerator.SelectSuffix</para>
    <para>net.ontopia.topicmaps.impl.rdbms.Platforms</para>
  </listitem>
</itemizedlist>

<para>The property net.ontopia.topicmaps.impl.rdbms.Platforms is now
inferred from the net.ontopia.topicmaps.impl.rdbms.Database property
value and should therefore normally not be specified.</para>

<para>The SQL IN-operator used by RDBMS tolog no longer uses a
predefined max elements size, but retrieves the setting from the
net.ontopia.persistence.query.sql.InMaxElements database property
instead. Default is that there now is no limit to the maximum number
of elements.</para>

<para>Poolman is no longer supported and has been dropped from the
distribution. Jakarta Commons DBCP is now the default connection pool
implementation. Connection pooling is now enabled by default.</para>

<para>Prepared statement pool is enabled by default by the DBCP
connection pool.</para>

<para>URI locators stored in the RDBMS did not get externalized
properly in getExternalForm and resolveAbsolute. This has now been
fixed.</para>
    
<para>The RDBMSDelete command line utility has been added.</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist> 
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1283">Bug
    #1283</ulink>: Identity not found in repository</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1271">Bug
    #1271</ulink>: Generic database platform should be implicit</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1295">Bug
    #1295</ulink>: Transaction is not active and store already open</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1294">Bug
    #1294</ulink>: StoreNotOpenException is thrown</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1270">Bug
    #1270</ulink>: instance-of slow when class have many superclasses</para>
  </listitem>
</itemizedlist>
</section>
</section>

<!-- ==========================================================================
     2.0.7                                                                  -->
<section>
<title>OKS 2.0.7 release notes</title>

<para>
This release resolves a couple of Java 1.3 compatibility issues and
two issues regarding the use of locators.
</para>

<section>
<title>Topic Map Engine</title>

<para>
<symbol>'|'</symbol> characters in file URLs were incorrectly escaped
by <symbol>URILocator.getExternalForm()</symbol>.
</para>
</section>

<section>
<title>Navigator Framework</title>

<para>
<symbol>&lt;output:locator&gt;</symbol> now uses
<symbol>LocatorIF.getExternalForm()</symbol> instead of
<symbol>LocatorIF.getAddress()</symbol> to output locator addresses.
</para>

</section>

</section>

<!-- ==========================================================================
     2.0.6                                                                  -->
<section>
<title>OKS 2.0.6 release notes</title>

<para>
This release is mainly a bug fix release. It resolves a couple of
issues in the RDBMS backend. There are also improvements in the XTM
import utility.
</para>

<section>
<title>Topic Map Engine</title>

<para>
The way merging is done during XTM import has been improved. The
importer code now avoids creating temporary topics in the cases where
the temporary object later would be merged with an existing
object. Temporary object creation is avoided where possible. This
should lead to improved performance in certain situations.
</para>
</section>

<section>
<title>RDBMS Backend</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1062">Bug
    #1062</ulink>: dynamic occurrence predicate not properly mapped to SQL</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1261">Bug
    #1261</ulink>: misleading directory reference</para>
  </listitem>
</itemizedlist>

</section>

</section>

<!-- ==========================================================================
     2.0.5                                                                  -->
<section>
<title>OKS 2.0.5 release notes</title>

<para>
This release is a bug fix release. It resolves a couple of Web Editor
bugs and a bug in the RDBMS Backend.
</para>

<section> <!-- WEB EDITOR -->
<title>Web Editor</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1251">Bug
    #1251</ulink>: Nested actions within &lt;webed:button&gt; never invoked</para>
  </listitem>
  <listitem>
    <para><ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=1252">Bug
    #1252</ulink>: &lt;webed:list&gt; actions always executed when
    type was multiselect</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title>

<para>
Some debugging statements were written to the console in the previous
release. These have now been removed.
</para>

</section>

</section>

<!-- ==========================================================================
     2.0.4                                                                  -->
<section>
<title>OKS 2.0.4 release notes</title>

<para>
This release is a bug fix release. It also adds previews of the RDF2TM
Omnigator plug-in and the Vizigator. The RDF2TM plug-in is turned off
by default, and not yet much documented. The Vizigator has separate
documentation included.
</para>

<section> <!-- ENGINE -->
<title>Topic Map Engine</title>

<para>
Prototypical support for <ulink url="http://www.tmapi.org">TMAPI</ulink> 
has been added. This does not quite conform to the final version, and
will have to be updated.
</para>

<para>
The RDF importer now supports a new <symbol>generateNames</symbol>
property, which enables it to automatically generate names for
nameless topics created by the mapping based on their URLs.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1142">Bug
    #1142</ulink>: File names in non-ASCII encodings cause errors</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1079">Bug
    #1079</ulink>: Can't resolve references to XTM files with spaces in URI</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1024">Bug
    #1024</ulink>: Associations with no roles get exported to invalid XTM</para>
  </listitem>
</itemizedlist>
</section>

<section> <!-- QUERY ENGINE -->
<title>Query engine</title>

<para>
The RDBMS implementation of tolog will now produce queries that in
some situations are <emphasis>significantly</emphasis> faster,
especially in PostgreSQL.
</para>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1096">Bug
    #1096</ulink>: Searches for keywords cause errors</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1032">Bug
    #1032</ulink>: Ordering by null value crashes</para>
  </listitem>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=972">Bug
    #972</ulink>: Incorrect results when same topic plays multiple roles</para>
  </listitem>
</itemizedlist>
</section>

<section> <!-- NAVIGATOR FRAMEWORK -->
<title>Navigator Framework</title>

<para>
The interpretation of the <symbol>index</symbol> attribute on the
<symbol>tm:fulltext</symbol> tag has changed. See the tag library
reference documentation for details.
</para>
</section>

<section> <!-- WEB EDITOR FRAMEWORK -->
<title>Web Editor Framework</title>

<para>
The <symbol>webed:field</symbol> tag now supports hidden fields.
</para>
</section>

</section>

<!-- ==========================================================================
     2.0.3                                                                  -->
<section>
<title>OKS 2.0.3 release notes</title>

<para>
This release is a bug fix release, but also contains some
optimizations and minor additions of new functionality, about which,
more below. The main extension is the experimental support for the new
<ulink url="http://www.isotopicmaps.org/sam/cxtm/">Canonical
XTM</ulink> syntax proposed for inclusion in the ISO 13250 standard.
</para>

<section> <!-- OMNIGATOR -->
<title>Omnigator</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>For scoping topics (themes) the Topic Page now displays
    lists of names, occurrences and types of associations that are
    scoped by the current topic. (Note: This functionality is
    experimental and may be removed or changed if it turns out to be
    too expensive in terms of performance.)</para>
  </listitem>

  <listitem>
    <para>Unary associations are now displayed separately from binary
    and n-ary associations.</para>
  </listitem>

  <listitem>
    <para>The display of occurrences whose resources have topics
    representing them has been improved.</para>
  </listitem>

  <listitem>
    <para>The export plug-in now supports the new <ulink
    url="http://www.isotopicmaps.org/sam/cxtm/">Canonical XTM</ulink>
    syntax proposed for inclusion in the ISO 13250 standard.</para>
  </listitem>

  <listitem>
    <para>The validator plug-in now displays better error messages in
    several cases.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1007">Bug
    #1007</ulink>: Number of occurrences being shown was incorrect</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=994">Bug
    #994</ulink>: <symbol>rulesfile</symbol> attribute on
    <symbol>tm:tolog</symbol> was broken</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor Framework</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The <symbol>webed:invoke</symbol> tag has been added. This
    tag can be useful for actions that always need to be invoked when
    a form is submitted.</para>
  </listitem>

  <listitem>
    <para>The <symbol>webed:form</symbol>,
    <symbol>webed:field</symbol>, <symbol>webed:list</symbol>, and
    <symbol>webed:button</symbol> tags now all have an
    <symbol>id</symbol> attribute, which can be used to attach
    JavaScript actions to the HTML form controls they produce.</para>
  </listitem>

  <listitem>
    <para>The <classname>AssignRolePlayer</classname> action has been
    extended to support use from checkboxes, by making it accept an
    additional argument.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=640">Bug
    #640</ulink>: No proper error message when user session expires</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title>

<para>
The tolog query engine has been modified to do extensive type
inferencing internally, in order to work out the possible types that
can be assigned to each variable. This information is now used to
optimize away some predicates that can never succeed because of type
conflicts. 
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=987">Bug
    #987</ulink>: The <symbol>value-like</symbol> predicate was
    sensitive to predicate order</para>
  </listitem>

  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1005">Bug
    #1005</ulink>: tolog SQL compiler optimized OR clauses too eagerly</para>
  </listitem>

  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=955">Bug
    #955</ulink>: The <symbol>value-like</symbol> predicate misbehaved
    with empty search strings</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>Engine</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>An experimental implementation of the standard Canonical XTM
    format has been added.</para>
  </listitem>

  <listitem>
    <para>The <methodname>getExternalForm</methodname> method has been
    added to the <interfacename>LocatorIF</interfacename> interface.
    This in order to allow URIs to be correctly escaped on output.</para>
  </listitem>

  <listitem>
    <para>The <methodname>setDuplicateSuppression</methodname> method
    was added to the <classname>RDFTopicMapReader</classname> class.</para>
  </listitem>

  <listitem>
    <para>The RDF topic map source now supports setting the RDF syntax
    as well as mapping files external to the RDF file being read.</para>
  </listitem>

  <listitem>
    <para>The <classname>TopicVariantNameGrabber</classname> class has
    been added in order to make it possible to grab variant names from
    topics.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1006">Bug
    #1006</ulink>: ImportExportUtils.getReader fails in applets</para>
  </listitem> 

  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=1000">Bug
    #1000</ulink>: ConcurrentModificationException thrown in
    DuplicateSuppressionUtils</para>
  </listitem>

  <listitem>
    <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=981">Bug
    #981</ulink>: The LTM #MERGEMAP directive caused name-based merging</para>
  </listitem>
</itemizedlist>
</section>

<section>
<title>RDBMS Backend</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
  <listitem>
    <para>The <filename>queries.xml</filename> and
    <filename>mapping.xml</filename> files are no longer read from the
    current directory by default, but instead from the .jar file.
    Their location can still be overridden using the properties file.</para>
  </listitem>

  <listitem>
    <para>Added database scripts for MS SQL Server and Firebird.</para>
  </listitem>

  <listitem>
    <para>The old 'oracle' platform has been split into 'oracle8' and
    'oracle9i', with 'oracle' as the generic fallback.</para>
  </listitem>

  <listitem>
    <para>The database scripts for PostgreSQL now create columns of
    the type <symbol>TEXT</symbol> (instead of
    <symbol>VARCHAR</symbol>), which gives unlimited-length
    strings.</para>
  </listitem>
</itemizedlist>
</section>
</section>

<!-- ==========================================================================
     2.0.1 -> 2.0.2                                                         -->
<section>
<title>Changes from 2.0.1 to 2.0.2</title>

<para>
This release contains mainly bug fixes and improvements. One important
change in this release is that the version number is included in the
$OKS_HOME directory name. This was introduced, so that one can easily
keep different versions apart and also avoid versions being copied
on top of each other.
</para>

<section>
<title>Engine</title>

<para>
Two improvements have been made:
</para>

<itemizedlist>
<listitem>
<para>URIs for topic maps stored in a relational database can now
reference the object id of the topic map object. Example:
x-ontopia:tm-rdbms:M1</para>
</listitem>
<listitem>
<para>The methods ImportExportUtils.getReader(String uri) and
ImportExportUtils.getReader(LocatorIF uri) now support URIs like
x-ontopia:tm-rdbms:M1.</para>
</listitem>
</itemizedlist>

<para>
These bugs were fixed in the topic map engine:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=924">Bug
#924</ulink>: Topic reader did not resolve DTDs when referenced by
URL.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=863">Bug
#863</ulink>: The way the sanity checker reported topics without a
name was broken.
</para>
</listitem>
</itemizedlist>

</section>

<section>
<title>Query Engine</title>

<para>
One improvement has been made:
</para>

<itemizedlist>
<listitem>
<para>Handling of nots for large result sets has been optimized.</para>
</listitem>

</itemizedlist>

<para>
In addition the following bug was fixed in the tolog engine:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=903">Bug
#903</ulink>: NullPointerException given when tolog engine could not
determine type of variable.
</para>
</listitem>
</itemizedlist>

</section>

<section>
<title>Fulltext</title>

<para>
One change has been made:
</para>

<itemizedlist>
<listitem>
<para>Upgraded to Lucene version 1.3 final.</para>
</listitem>

</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
<listitem>
<para>The object id of a topic is now being displayed on the Omnigator
topic page.</para>
</listitem>
<listitem>
<para>All navigator framework JSP tag attributes now allow runtime
expressions.</para>
</listitem>
</itemizedlist>

</section>

<section>
<title>Web Editor Framework</title>

<para>
One improvement has been made:
</para>

<itemizedlist>
<listitem>
<para>The action configuration file (actions.xml) is now validated
against the DTD when loaded.</para>
</listitem>
</itemizedlist>

<para>
In addition the following bug were fixed:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=883">Bug
#883</ulink>: The tolog delete action only supported a single
expression.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=882">Bug
#882</ulink>: The tolog evaluate LTM action threw a
NullPointerException when it didn't get any parameters.
</para>
</listitem>
</itemizedlist>

</section>

<section>
<title>RDBMS Backend</title>

<para>
The following improvements have been made:
</para>

<itemizedlist>
<listitem>
<para>String comparison in MySQL has been made case-sensitive. In
previous releases they were case-insensitive. This was considered a
bug.</para>
</listitem>
<listitem>
<para>Fixed a bug in rdbms tolog that caused query parameters not to
be passed through to the generated SQL query.</para>
</listitem>
<listitem>
<para>The rdbms test suite now cleans up after itself in the
database.</para>
</listitem>
<listitem>
<para>Added the RDBMSTopicMapReader(long topicmap_id) constructor.</para>
</listitem>
</itemizedlist>

</section>

</section>

<!-- ==========================================================================
     2.0 -> 2.0.1                                                           -->
<section>
<title>Changes from 2.0 to 2.0.1</title>

<para>
This release contains mainly bug fixes and improvements.
</para>

<section>
<title>Engine</title>

<para>
New functionality has been added to the RDF support:
</para>

<itemizedlist>
<listitem>
<para>The RDF source now supports an external mapping file.</para>
</listitem>
<listitem>
<para>The RDF source now supports the duplicateSuppression parameter.</para>
</listitem>
</itemizedlist>

<para>
In addition the following bug was fixed in the engine test suite:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=865">Bug
#865</ulink>: The engine test suite reported three failures on certain
versions of Windows. The problem was a bug in the test suite itself,
not the engine.
</para>
</listitem>
</itemizedlist>

</section>

<section>
<title>Navigator Framework</title>

<para>
Two improvements have been made:
</para>

<itemizedlist>
<listitem>
<para>The reporting of out-of-memory errors has been improved.</para>
</listitem>
<listitem>
<para>The configuration guide has been updated with all tm-sources.xml details.</para>
</listitem>
</itemizedlist>

</section>

<section>
<title>Web Editor Framework</title>

<para>
One improvement has been made:
</para>

<itemizedlist>
<listitem>
<para>User objects now use a least-recently used algorithm, which
reduces the risk of out-of-memory errors.</para>
</listitem>
</itemizedlist>

</section>

<section>
<title>RDBMS Backend</title>

<para>
The following changes have been made:
</para>

<itemizedlist>
<listitem>
<para>MySQL database creating script now uses InnoDB tables so that
transactions can be used.</para>
</listitem>
</itemizedlist>

</section>

</section>

<!-- ==========================================================================
     1.4.2 -> 2.0                                                           -->
<section>
<title>Changes from 1.4.2 to 2.0</title>

<para>
This is the first OKS release for quite some time, and so there are
substantial changes, many bug fixes, and some new features. The
changes are so substantial that some minor changes are not listed, and
some minor bug fixes omitted.
</para>

<section>
<title>Omnigator</title>

<para>
The following functionality has been added to the Omnigator:
</para>

<itemizedlist>
<listitem>
<para>Support for displaying association types which form hierarchies
using a collapsible tree view, provided they use <ulink
url="http://www.techquila.com/psi/hierarchy/">Techquila's PSIs for
hierarchies</ulink>. Also shows the position of each topic within the
hierarchies formed by these association types.</para>
</listitem>
<listitem>
<para>Now displays metadata about each topic map on the topic map
page.</para>
</listitem>
<listitem>
<para>Now will display a name (and topic link) for an occurrence when
there exists a topic representing the resource the occurrence links
to.</para>
</listitem>
<listitem>
<para>XTM topic maps are now validated against the XTM DTD when loaded
and validation errors cause the loading to be aborted.</para>
</listitem>
<listitem>
<para>There is a new index on the topic map page: index of nameless
topics, which lists all topics which don't have a name. These are
often caused by bad cross-references within a topic map.</para>
</listitem>
<listitem>
<para>Better error messages are displayed when topic map loading is
stopped because of errors in an XML document, whether HyTM or XTM.</para>
</listitem>
</itemizedlist>

<para>
The following bugs have been fixed in the Omnigator:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=718">Bug #718</ulink>:
Topic maps imported from LTM and exported using the export plug-in as
XTM would get an .ltm file extension.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=700">Bug #700</ulink>:
The <filename>startup.bat</filename> batch script would not work on
Windows 98.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=669">Bug #669</ulink>:
Full-text searches would fail whenever the ID of a topic map contained
a whitespace.
</para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The following changes have been made to the Navigator Framework:
</para>

<itemizedlist>
<listitem>
<para>There is now support for Servlets 2.2 and JSP 1.1. Note that to
use JSP 1.1 the special TLD files supplied for that purpose in
<filename>${basedir}/config/jsp-11</filename> must be used.</para>
</listitem>
<listitem>
<para>The <symbol>rulesfile</symbol> attribute was added to the
<symbol>tm:tolog</symbol> tag. This attribute makes it possible to
load tolog rules files in order to make the queries in them accessible
to applications.</para>
</listitem>
<listitem>
<para>The <symbol>parameter</symbol> attribute was added to the
<symbol>tm:lookup</symbol> tag. This attribute makes it possible to
look up a topic map object from a request parameter.</para>
</listitem>
<listitem>
<para>The <symbol>to</symbol> attribute was added to the
<symbol>tm:associated</symbol> tag. This attribute makes it easier to
find the associations between two topics.</para>
</listitem>
<listitem>
<para>The <symbol>order</symbol> attribute was added to the
<symbol>logic:foreach</symbol> tag. This attribute makes it possible
to reverse the order in which the loop traverses the collection being
iterated over.</para>
</listitem>
<listitem>
<para>The <symbol>value:sequence</symbol> tag has been added, which
makes it possible to build collections in any desired order.</para>
</listitem>
<listitem>
<para>The <symbol>template:split</symbol> tag has been added, in order
to support more advanced uses of templates.</para>
</listitem>
<listitem>
<para>Added the <symbol>stringifier</symbol> attribute to the
<symbol>output:content</symbol> tag.</para>
</listitem>
<listitem>
<para>Added the <symbol>output:debug</symbol> tag.</para>
</listitem>
<listitem>
<para>Added the <exceptionname>NonExistentObject</exceptionname>
exception, which is now thrown whenever an application is passed an
invalid topic map object ID to a page. This allows applications to
route the error to a page that displays the error in the way they
want.</para>
</listitem>
<listitem>
<para>Added the <classname>NoEscapeStringifier</classname> class,
which is useful for outputting strings containing special XML/HTML
characters without escaping.</para>
</listitem>
</itemizedlist>

<para>
The following bugs have been fixed in the Navigator Framework:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=541">Bug #541</ulink>:
Non-ASCII characters would not work in topic IDs.
</para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Web Editor Framework</title>

<para>
The Web Editor Framework is now out of beta and is now ready for use
in applications. The Framework has changed substantially since version
1.4.2, and has also been extended considerably. A large number of bugs
have been fixed, and in general the use of the Framework has been
simplified substantially.
</para>

<para>
The changes are sufficiently comprehensive that we have decided not to
document them in detail. In general, it can not be expected that
applications developed with 1.4.2 will run with 2.0.
</para>
</section>

<section>
<title>Engine</title>

<para>
The following changes have been made to the Topic Map Engine:
</para>

<itemizedlist>
<listitem>
<para>Added the <symbol>net.ontopia.topicmaps.utils.rdf</symbol>
package. This package provides support for RDF import and export. (See
separate documents in the distribution for details.)</para>
</listitem>
<listitem>
<para>The <methodname>getStore</methodname> method has been added to
the <interfacename>TopicMapIF</interfacename> interface.</para>
</listitem>
<listitem>
<para>Added <methodname>getAddIds</methodname> and
<methodname>setAddIds</methodname> methods to the
<classname>XTMTopicMapWriter</classname> class, in order to make it
possible to control whether or not id attributes should be generated
for elements which do not represent reified topic map
constructs.</para>
</listitem>
<listitem>
<para>Added the <classname>URLTopicMapStore</classname> class, which
supports downloading an individual topic map from a specified URL.</para>
</listitem>
<listitem>
<para>Added a <methodname>mergeInto</methodname> method to the
<classname>MergeUtils</classname> class which merges a topic from one
topic map into a different topic map.</para>
</listitem>
<listitem>
<para>Added the <methodname>remove</methodname> method to the
<classname>DeletionUtils</classname> class. This method removes a
topic map object from the containing topic map, regardless of what
type of topic map object it might be.</para>
</listitem>
<listitem>
<para>Added the <methodname>removeTopic(TopicIF topic, boolean
removeAssociations)</methodname> method to the
<classname>DeletionUtils</classname> class. This method makes it
possible to control whether associations the topic participates in are
deleted or not.</para>
</listitem>
<listitem>
<para>Added the <methodname>clearTopicMap</methodname> method to the
<classname>DeletionUtils</classname> class. This method removes the
contents of a topic map.</para>
</listitem>
<listitem>
<para>Added the <methodname>deleteTopicMap</methodname> method to the
<classname>DeletionUtils</classname> class. This method removes an
entire topic map.</para>
</listitem>
<listitem>
<para>The
<classname>net.ontopia.products.license.LicenseInfo</classname>
command-line tool has been added. This tool shows where the OKS looks
for the license key, and also where it finds the one it uses (if
indeed it does find one).</para>
</listitem>
<listitem>
<para>Added a series of static <methodname>toString</methodname>
methods to the <classname>TopicStringifiers</classname> class, which
produce a name for a topic with various possible scope
settings.</para>
</listitem>
<listitem>
<para>Added the <classname>TMDeciderUtils</classname> class, which
can easily create various kinds of useful deciders.</para>
</listitem>
<listitem>
<para>The <methodname>getByType</methodname> method has been
added to the <classname>CharacteristicUtils</classname> class. The
method returns the first characteristic that is of a given type within
a collection.</para>
</listitem>
<listitem>
<para>There have been more changes to the APIs, but these are
considered to minor to be worthy of mention here.</para>
</listitem>
</itemizedlist>

<para>
The following bugs have been fixed in the Topic Map Engine:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=834">Bug #834</ulink>:
The <methodname>getInstancesOf</methodname> method in
<classname>ClassInstanceUtils</classname> was broken.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=827">Bug #827</ulink>:
The <classname>URILocator</classname> class allowed '#' characters
inside fragments.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=813">Bug
#813</ulink>: The <methodname>mergeInto</methodname> method in
<classname>MergeUtils</classname> that merges topics in the same topic
map did not remove duplicates.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=750">Bug #750</ulink>:
In certain rare cases <symbol>mergeMap</symbol> elements in XTM files
could cause loading to fail.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=738">Bug #738</ulink>:
The HyTM importer would lose source locators in cases where the same
topic was represented by many <symbol>topic</symbol> elements.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=679">Bug #679</ulink>:
'+' characters in file names would turn into spaces.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=672">Bug #672</ulink>:
The <methodname>removeTopic</methodname> method in
<classname>DeletionUtils</classname> would sometimes throw
concurrent modification exceptions.
</para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Query Engine</title>

<para>
The following changes have been made to the Query Engine:
</para>

<itemizedlist>
<listitem>
<para>Now upgraded to support tolog 1.0. (See the tolog tutorial for
information on the new functionality in tolog 1.0.)</para>
</listitem>
<listitem>
<para>Added the <methodname>execute(String query, Map
params)</methodname> method to the
<interfacename>QueryProcessorIF</interfacename> interface. This
provides support for dynamic parameters to preparsed queries.</para>
</listitem>
<listitem>
<para>Added the <methodname>execute(Map params)</methodname> method to
the <interfacename>ParsedQueryIF</interfacename> interface. This
provides support for dynamic parameters to preparsed queries.</para>
</listitem>
<listitem>
<para>A number of optimizations have been introduced, which causes
certain classes of queries to run dramatically much faster.</para>
</listitem>
</itemizedlist>

<para>
The following bugs in the Query Engine have been fixed:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=809">Bug #809</ulink>:
The <symbol>count</symbol> aggregate function would also count
duplicate results in the in-memory implementations.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=671">Bug #671</ulink>:
Queries on n-ary associations with repeated roles would not work in
the in-memory implementation.
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=564">Bug #564</ulink>:
The results of symmetric query predicates was not defined.
</para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Schema Tools</title>

<para>
The only changes to the Schema Tools have been the following bug
fixes:
</para>

<itemizedlist>
<listitem>
<para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=721">Bug #721</ulink>:
Validator would crash on references to a non-existent superclasses in
schemas.
</para>
</listitem>

</itemizedlist>
</section>

<section>
<title>The RDBMS Backend</title>

<para>
The RDBMS tolog implementation has been updated to support the full
tolog 1.0. The following bugs has been fixed:
</para>
<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=758">Bug #758</ulink>:
Exceptions thrown in some rare situations because of problem with cache update.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=680">Bug #680</ulink>:
Association role cache were sometimes out of sync with data store.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=692">Bug #692</ulink>:
Transaction flushing was reentrant and caused infinite loop.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=681">Bug #681</ulink>:
Transaction flusing was not synchronized.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=677">Bug #677</ulink>:
Non-materialized fields written to database when they should not be.</para>
</listitem>
</itemizedlist>

</section>

</section>


<!-- ==========================================================================
     1.4.1 -> 1.4.2                                                         -->
<section>
<title>Changes from 1.4.1 to 1.4.2</title>

<para>
This release is purely a bug fix release.
</para>

<section>
<title>Omnigator</title>

<para>
We have fixed the following bugs in the Omnigator:
</para>

<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=661">Bug #661</ulink>:
Associations where current topic plays multiple roles displayed
incorrectly.</para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The following bugs have been fixed in the Navigator Framework:
</para>

<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=663">Bug #663</ulink>:
Setup servlets did not work with Tomcat 4.1 and shared repositories.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=659">Bug #659</ulink>:
Role players were disregarded when sorting association roles.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=658">Bug #658</ulink>:
ContextTag caching caused problems in Oracle 9i Application Server
and WebLogic.</para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Topic Map Engine</title>

<para>
The following bugs have been fixed in the Topic Map Engine:
</para>

<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=657">Bug #657</ulink>:
Base names sometimes lost when merging topics.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=664">Bug #664</ulink>:
File URLs were normalized incorrectly.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=660">Bug #660</ulink>:
In XTM, having a topicRef and a subjectIndicatorRef to the same URI
within the subjectIdentity element caused an exception.</para>
</listitem>
</itemizedlist>

<para>
In addition, <interfacename>NameIndexIF</interfacename> has now been
made auto-updating.
</para>
</section>

<section>
<title>Query Engine</title>

<para>
The following bugs have been fixed in the Query Engine:
</para>

<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=655">Bug #655</ulink>:
Queries failed on unary associations.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=662">Bug #662</ulink>:
Bug(s) in merging of results from inference rules.</para>
</listitem>
</itemizedlist>
</section>
</section>

<!-- ==========================================================================
     1.4 -> 1.4.1                                                           -->
<section>
<title>Changes from 1.4 to 1.4.1</title>

<para>
This release is a bug fix release, released primarily to fix some
embarrassing problems in the Omnigator. There are bug fixes in other
parts of the OKS as well, however. The LTM Emacs mode is now
distributed with the OKS, as is one additional topic map:
<filename>support-kb.ltm</filename>.
</para>

<section>
<title>Omnigator</title>

<para>
We are now bundling Tomcat 4.1.18 with the Omnigator, rather than
4.0.6, which we used for 1.4. The front page has been cleaned up a
little, and a link to a new "Index of Individuals", showing all the
topics that are not typing topics, has been added to the topic map
page. In addition, we have fixed the following bugs:
</para>

<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=656">Bug #656</ulink>:
Class hierarchy loops caused Omnigator to freeze.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=648">Bug #648</ulink>:
Couldn't display topic maps when the superclass-subclass topic (with
role topics) was defined, but there were no associations of that type.
</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=578">Bug #578</ulink>:
Refreshing application configuration failed to work for some
configuration settings.
</para>
</listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The following bugs have been fixed in the Navigator Framework:
</para>

<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=605">Bug #605</ulink>:
Improved error message when <symbol>tm:associated</symbol> gets input
that does not only consist of topics.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=634">Bug #634</ulink>:
<symbol>template:put</symbol> did not call BodyContent.clearBody().
</para>
</listitem>
</itemizedlist>

<para>
In addition the documentation has been improved in places.
</para>
</section>

<section>
<title>Topic Map Engine</title>

<para>
The following bugs have been fixed in the Topic Map Engine:
</para>

<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=654">Bug #654</ulink>:
Exporter assigns duplicate IDs.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=598">Bug #598</ulink>:
NullPointerException when loading topic map.</para>
</listitem>
</itemizedlist>

<para>
In addition the documentation has been improved in places.
</para>
</section>

<section>
<title>Query Engine</title>

<para>
The following bugs have been fixed in the Query Engine:
</para>

<itemizedlist>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=643">Bug #643</ulink>:
Queries of the form related($A : term, $A : term) did not work.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=593">Bug #593</ulink>:
Selecting the same variable twice crashed rather than provide a proper
error message.</para>
</listitem>
<listitem>
<para><ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=615">Bug #615</ulink>:
Order by in tolog did not use sort names.</para>
</listitem>
</itemizedlist>

<para>
In addition the documentation has been improved in places.
</para>
</section>
</section>

<!-- ==========================================================================
     1.3.4 -> 1.4                                                           -->
<section>
<title>Changes from 1.3.4 to 1.4</title>

<para>
This release adds several major new features to the OKS, the most
important of which are:
</para>

<itemizedlist>
<listitem>
<para>A beta version of the Web Editor Framework,</para>
</listitem>
<listitem>
<para>Improvements to the Navigator Framework to make it more
powerful and easier to use,</para>
</listitem>
<listitem>
<para>An implementation of tolog designed for use with the RDBMS
backend, and</para>
</listitem>
</itemizedlist>

<para>
Each of these are described in more detail below. In addition, this
version has a large number of bug fixes, as well as numerous minor
improvements to the documentation.
</para>

<section>
<title>Omnigator</title>

<para> A plug-in for providing feedback to Ontopia has been added to
the Omnigator, there are now links to the topics that represent role
types from the pages about association types, subject addresses are
being displayed, and it is now distributed with Tomcat 4.1. The
following bugs have been fixed: </para>

<itemizedlist>
<listitem><para> <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=601">Bug #601</ulink>:
The Tomcat batch scripts set environment variables incorrectly on
Windows in some cases.</para></listitem>
<listitem><para> <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=618">Bug #618</ulink>:
Reloading unloaded topic maps on the Manage page caused an
error.</para></listitem>
<listitem><para> <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=584">Bug #584</ulink>:
Topics were sorted by base name rather than sort name.</para></listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The most important changes to the Navigator Framework functionality
are:
</para>

<itemizedlist>
<listitem>
<para>The <symbol>logic:if</symbol> tag can now be used inside
<symbol>logic:set</symbol> since it will now pass values produced in
the then/else branches upwards. This makes it possible to write
much more powerful recursive functions.</para>
</listitem>
<listitem>
<para>The <symbol>tm:tolog</symbol> tag now has an attribute
<symbol>select</symbol> for producing a collection of values rather
than a map.</para>
</listitem>
<listitem>
<para>The <symbol>logic:set</symbol> tag will now produce an empty
collection if it has no content, thus making it easier to produce
empty collections.</para>
</listitem>
<listitem>
<para>The <symbol>tm:associated</symbol> tag has a new attribute
<symbol>produce</symbol>, which can be used to tell it to produce
associations rather than topics.</para>
</listitem>
<listitem>
<para>The <symbol>tm:subjectAddress</symbol> tag has been added.
</para>
</listitem>
</itemizedlist>

<para>
In addition, a number of bugs have been fixed in the Navigator
Framework:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=634">Bug
#634</ulink>: A bug in the ontojsp JSP tag interpreter made functions
work poorly in Tomcat 4.1.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=624">Bug
#624</ulink>: The <symbol>tm:name</symbol> tag would crash if given
the wrong kind of collection in its <symbol>basenameScope</symbol>
attribute.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=583">Bug
#583</ulink>: The Navigator Framework did not work correctly in the
BEA WebLogic application server.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=575">Bug
#575</ulink>: The <symbol>tm:name</symbol> tag produced collections
containing <literal>null</literal> when used on a topic which had no
name. This would cause problems for other tags.</para>
</listitem>
</itemizedlist>
</section>


<section>
<title>Topic Map Engine</title>

<para>
The following change has been made to the topic map engine:
</para>

<itemizedlist>
<listitem>
<para>The <classname>SubjectUtils</classname> class has been
deprecated since it was badly broken (it did not distinguish between
subject addresses and subject indicators), and because it did not
perform any useful function.</para>
</listitem>
</itemizedlist>

<para>
The only changes to the topic map engine in this release are the
following bug fixes:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=535">Bug
#535</ulink>: The <classname>SubjectIdentityDecider</classname> did
not distinguish subject addresses from subject identifiers. Nor did
any of the many classes that used it.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=623">Bug
#623</ulink>: The LTM parser provided poor error messages when the
ID of the topic map collided with that of a topic.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=614">Bug
#614</ulink>: The LTM parser would loop forever if presented with an
LTM file which had an internal occurrence that was not terminated with
<symbol>]]</symbol>.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=582">Bug
#582</ulink>: The XTM importer ignored the XML namespace of elements
and used the XML 1.0 element type name to look for XTM elements. Now
accepts any element in the XTM namespace.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=522">Bug
#522</ulink>: In XTM documents containing more than one topic map
references to the same external document from multiple topic maps will
only be loaded for the first topic map.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=538">Bug
#538</ulink>: A mistake in the test code for the module encrypter
caused the test suite to fail on Windows due to differences in line
endings.</para>
</listitem>
</itemizedlist>
</section>


<section>
<title>The Schema Tools</title>

<para>
In this version a number of problems in the documentation of the OSL
schema language have been fixed, and some bugs in the tools themselves
have been fixed.
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=557">Bug
#557</ulink>: When a topic was an instance of two different classes
the validator would not merge the constraints on the two classes
correctly.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=629">Bug
#629</ulink>: The OSL importer did not handle superclass references to
classes defined further down in the file.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=614">Bug
#614</ulink>: The LTM parser would loop forever if presented with an
LTM file which had an internal occurrence that was not terminated with
<symbol>]]</symbol>.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=582">Bug
#582</ulink>: The XTM importer ignored the XML namespace of elements
and used the XML 1.0 element type name to look for XTM elements. Now
accepts any element in the XTM namespace.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=522">Bug
#522</ulink>: In XTM documents containing more than one topic map
references to the same external document from multiple topic maps will
only be loaded for the first topic map.</para>
</listitem>
</itemizedlist>
</section>


<section>
<title>The Query Engine</title>

<para>
A new implementation of the tolog query language designed especially
for the RDBMS backend has been added. This implementation converts
tolog queries directly to SQL queries, which are then executed by the
RDBMS. This makes evaluation of tolog queries enormously much faster
when running on the RDBMS backend.
</para>

<para>
The
<classname>net.ontopia.topicmaps.query.utils.QueryUtils</classname>
class has also been added to the API. Developers are recommended to
use this class to create instances of the
<interfacename>QueryProcessorIF</interfacename> interface, as this
class will create different processors depending on what topic map
implementation is used.
</para>

<para>
In addition, a method for loading rules from Java
<interfacename>Reader</interfacename> objects has been added to the
<interfacename>QueryProcessorIF</interfacename>.
</para>
</section>


<section>
<title>The RDBMS Backend</title>

<para>
The only changes to the RDBMS backend have been a tiny optimization of
some queries, and a single bug fix:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=627">Bug
#627</ulink>: In some cases constraints in the RDBMS schema would be
violated when collection properties were modified.</para>
</listitem>
</itemizedlist>
</section>
</section>

<!-- ==========================================================================
     1.3.3 -> 1.3.4                                                         -->

<section>
<title>Changes from 1.3.3 to 1.3.4</title>

<para>
This release is primarily a bug fix release, though some optimizations
have also been performed, and some APIs have been cleaned up. In
addition, there are some minor improvements here and there.
</para>

<section> 
<title>Omnigator</title>

<para>
A number of minor adjustments have been made in the Omnigator's
display. In addition, the free download now has an additional
capability. 
</para>

<itemizedlist>
<listitem>
<para>The number of objects in each list is now displayed together
with the heading.</para>
</listitem>

<listitem>
<para>The association players now have their names selected using the
current topic as a theme.</para>
</listitem>

<listitem>
<para>The scope of associations is now displayed using a mouse-over.</para>
</listitem>

<listitem>
<para>The name chosen for the title of the topic page now tries to
use the topic types as themes when selecting a name to display.</para>
</listitem>

<listitem>
<para>The free download distribution of the Omnigator now includes the
fulltext adminstration plug-in. This plug-in lets you create and delete
fulltext indexes for topic maps.</para>
</listitem>

<listitem>
<para>The full-text plug-in 'No index' message is now a link to the
    full-text administration plug-in manage page.</para>
</listitem>

<listitem>
<para>The "fulltext-admin" plug-in directory has been renamed to
    "ftadmin", because the Tomcat JSP compiler (Jasper) converts
    directory names to Java package names and hyphens are not allowed
    in package names.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>Navigator Framework</title>

<para>
The tag libraries have seen some internal changes, and a couple of
usability improvements.
</para>

<itemizedlist>
<listitem>
<para>The <symbol>tm:tolog</symbol> tag now has a
<symbol>select</symbol> attribute that allows it to produce a
collection of topics rather than maps.</para>
</listitem>
<listitem>
<para>The <symbol>logic:set</symbol> tag has been changed, so that if
empty it will still set the named variable, but set it to the empty
collection. (In previous versions the variable was not set at all.)</para>
</listitem>
<listitem>
<para>The tag library implementation has been optimized, yielding some
performance improvements.</para>
</listitem>
<listitem>
<para>The method
<methodname>net.ontopia.topicmaps.nav2.core.NavigatorApplicationIF.getUserStoreRegistry()</methodname>
has been added and replaces the now deprecated
<methodname>getStoreRegistry()</methodname> and
<methodname>getTransactionUser()</methodname> methods. This change renders the
transaction user used by the navigator application transparent.</para>
</listitem>
<listitem>
<para><classname>net.ontopia.topicmaps.nav2.core.NavigatorTagException</classname>
    and derived exception classes now support nested exceptions,
    i.e. the cause.</para>
</listitem>
<listitem>
<para>Added
<classname>net.ontopia.topicmaps.nav2.impl.basic.AbstractFunction</classname>,
which is a common base class for user defined taglib functions. See
the <symbol>logic:externalFunction</symbol> in the taglib reference
for more information. </para>
</listitem>
<listitem>
<para>Deprecated the following methods in
<classname>net.ontopia.topicmaps.nav2.core.FunctionIF</classname>:
<methodname> getName()</methodname>,
<methodname>getReturnVariableName()</methodname>, and
<methodname>call(PageContext, TagSupport)</methodname>.</para>
</listitem>
<listitem>
<para>Added
<methodname>net.ontopia.topicmaps.nav2.core.FunctionIF.execute(PageContext,
TagSupport)</methodname>, which now takes over the role of executing
user defined functions. Existing functions will continue to work
provided they subclass <classname>AbstractFunction</classname>.</para>
</listitem>
<listitem>
<para>Added
<methodname>net.ontopia.topicmaps.nav2.core.NavigatorPageIF.registerFunction(String,
FunctionIF)</methodname>, which replaces the now deprecated
<methodname>registerFunction(FunctionIF)</methodname> method.</para>
</listitem>
<listitem><para> <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=560">Bug #560</ulink>:
First content node inside functions was ignored.</para></listitem>
</itemizedlist>

</section>

<section> 
<title>Topic Map Engine</title>

<para>
The changes to the engine mainly consist in bug fixes, optimizations,
and minor API improvements.
</para>

<itemizedlist>
<listitem>
<para>The URILocator(File) constructor was added to make it easy to
create URI locators from File objects.</para>
</listitem>
<listitem>
<para>The StoreRegistry.isStoreOpen(Object txnuser, String refkey)
method was added so that it was possible to figure out if a store for
a reference key was open for the specified transaction user.</para>
</listitem>
<listitem>
<para>The <classname>UserStoreRegistry</classname> class was added to
make it easier to use the <classname>StoreRegistry</classname> in
situations where there was only a single transaction user.</para>
</listitem>
<listitem>
<para>The utility class
<classname>NullResolvingExternalReferenceHandler</classname> was
added, as a default reference handler that does not resolve any
external references.</para>
</listitem>
<listitem>
<para>Added <methodname>TopicMapStoreIF.delete()</methodname>, which
lets you delete a topic map from the store. Note that the topic map
must be empty, ie. not contain any topics, associations, or facets,
before it can be deleted.</para>
</listitem>
<listitem>
<para>Added
<classname>net.ontopia.topicmaps.entry.UserStoreRegistry</classname>,
a wrapper class for <classname>StoreRegistry</classname> instances and
a single transaction user.</para>
</listitem>
<listitem>
<para>The scope processing code has been optimized.</para>
</listitem>
<listitem><para> <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=545">Bug #545</ulink>:
An exception was thrown when an XTM &lt;topicRef&gt; URI didn't not
contain a fragment ("#"). This has now been fixed.</para></listitem>
<listitem><para> <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=533">Bug #533</ulink>:
The tm-sources.xml now produces better error messages for certain
errors.</para></listitem>
</itemizedlist>
</section>

<section> 
<title>Full-text Integration</title>

<itemizedlist>
<listitem>
<para>The full-text integration has been upgraded to use Lucene 1.2
    final. The Lucene change log is available <ulink
    url="http://cvs.apache.org/viewcvs/jakarta-lucene/CHANGES.txt?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup">here</ulink>.</para>
</listitem>
</itemizedlist>

</section>

<section> 
<title>Query Engine</title>

<itemizedlist>
<listitem>
<para>Added
    <methodname>net.ontopia.topicmaps.query.core.QueryResultIF.close()</methodname>
    which lets query results release its underlying resources.</para>
</listitem>
<listitem>
<para>Added
<methodname>net.ontopia.topicmaps.query.utils.QueryUtils.getQueryProcessor(TopicMapIF)</methodname>,
which makes it possible to get a query processor optimized for the
given topic map.</para>
</listitem>
</itemizedlist>

</section>

<!-- section> 
<title>Schema Tools</title>

<itemizedlist>
<listitem>
<para></para>
</listitem>
</itemizedlist>

</section -->

<section> 
<title>RDBMS Backend Connector</title>

<itemizedlist>
<listitem>
<para><methodname>RDBMSTopicMapReference.delete()</methodname> now
    delegates to <methodname>RDBMSTopicMapStore.delete()</methodname>,
    which allows TopicMapIF instances to be deleted if they contain no
    data.</para>
</listitem>
<listitem>
<para>The syntax of the URI locator returned by
    <methodname>RDBMSTopicMapStore.getBaseAddress()</methodname> was
    wrong. This has now been fixed. The correct syntax is
    'x-tm:rdbms:12345', where 12345 is the id of the topic map.</para>
</listitem>
<listitem>
<para>Added
    <classname>net.ontopia.topicmaps.impl.rdbms.RDBMSSingleTopicMapSource</classname>,
    which lets you reference individual RDBMS topic maps.</para>
</listitem>
</itemizedlist>

</section>

</section>

<!-- ==========================================================================
     1.3.2 -> 1.3.3                                                            -->


<section>
<title>Changes from 1.3.2 to 1.3.3</title>

<para>
This release is almost purely a bugfix release. It corrects a bug in
the test suite, as well as an important bug in the RDBMS backend. We
recommend that RDBMS users upgrade. Other users need not bother.
</para>

<section> 
<title>Navigator Framework</title>
<para>
The functionality has been extended/changed in the following ways:
</para>

<itemizedlist>
<listitem>
<para>The generation of topic map IDs in links is now improved. It no
longer depends on the <symbol>logic:context</symbol> tag.</para>
</listitem>

<listitem>
<para>The <methodname>getTopicMapById(Object txnuser, String
topicmapId)</methodname> method on
<interfacename>NavigatorApplicationIF</interfacename> has been
deprecated. It will eventually be removed.</para>
</listitem>

<listitem>
<para>The <methodname>getTopicMapRefId</methodname> method on
<interfacename>NavigatorApplicationIF</interfacename> has been added.
</para>
</listitem>
</itemizedlist>
</section>
<section> 
<title>Topic Map Engine</title>
<para>
There has been one API change; a new constructor for the
<classname>URILocator</classname> class has been added:
<symbol>URILocator(File file)</symbol>.
</para>

<para>
The following bugs were fixed:
</para>

<itemizedlist>
<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=538">Bug
#538</ulink>: A weakness in 
<classname>EncryptionWriter</classname>, an internal class used only
for building releases, caused the test suite to fail on Windows and
on platforms where the default encoding was not ISO 8859-1. This
class has now been replaced by one which does not have this problem.
</para></listitem>

<listitem><para>Some unreported problems with the
<methodname>importInto</methodname> method in
<classname>XTMTopicMapReader</classname> and
<classname>LTMTopicMapReader</classname> have been fixed.
</para></listitem>
</itemizedlist>
</section>

<section> 
<title>RDBMS Backend Connector</title>
<para>
The following bugs have been fixed:
</para>

<itemizedlist>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=540">Bug
 #540</ulink>: The positions of the two parameters to lookup by source
 locator were reversed in <filename>queries.xml</filename>, which
 caused all such lookups to fail with PostgreSQL databases. Subject
 address lookups had the same problem and failed with all
 databases. This is a serious bug, and has been fixed in this
 release. Upgrades are recommended.</para>
</listitem>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=539">Bug
 #539</ulink>: The developer's guide had some out-of-date code
 exaaples.</para>
</listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.3.1 -> 1.3.2                                                            -->

<section>
<title>Changes from 1.3.1 to 1.3.2</title>

<para>
Previous versions shipped with a built-in license key that would
expire 90 days after the version was built. In version 1.3.2 this is
different. The software comes with no default license key, and will
not run before it gets one. Read section 3.2 of the install guide to
see how the software finds its license key.
</para>


<section> 
<title>Omnigator</title>

<para>
Some new features have been added, as listed below. Note also that the
interpretation of XTM documents has changed, as described in
<xref linkend="engine-1.3.2"/>.
</para>

<itemizedlist>
<listitem>
<para>If the topic map has a reifying topic with a description
occurrence (using <ulink
url="http://psi.ontopia.net/xtm/occurrence-type/description">the
Ontopia description PSI</ulink>) that description is now displayed on
the topic map start page.</para>
</listitem>

<listitem>
<para>The tolog plug-in now lets you specify inference rules.</para>
</listitem>

<listitem>
<para>The Omnigator now displays the source locators of topics at the
bottom of the page.</para>
</listitem>

<listitem>
<para>The Omnigator now produces stable links to topics, by using the
symbolic IDs from the source files instead of object IDs.</para>
</listitem>

<listitem>
<para>The Omnigator now displays its version number, build details,
and expiry date on the welcome page.</para>
</listitem>
</itemizedlist>
</section>
<section> 
<title>Navigator Framework</title>
<para>
The functionality has been extended/changed in the following ways:
</para>

<itemizedlist>
<listitem>
<para>The <symbol>output:id</symbol> tag has been added. This tag
makes it possible for web applications to produce stable links.  This
is related to <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=515">bug #515</ulink>.</para>
</listitem>
</itemizedlist>

<para>
In addition, some reference diagrams have been added to the tag
library documentation, to make it easier to see how to traverse topic
map information using the tag libraries.
</para>

<para>
A number of bugs have also been fixed:
</para>

<itemizedlist>
<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=513">Bug
#513</ulink>: The <symbol>output:treediagram</symbol> tag did not use
the user context filter when labelling nodes in the tree.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=489">Bug
#489</ulink>: The <symbol>tm:occurrences</symbol> tag accepted illegal
values in the <symbol>type</symbol> attribute.
</para></listitem>
</itemizedlist>
</section>
<section id="engine-1.3.2"> 
<title>Topic Map Engine</title>
<para>
As part of the fix to <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=523">bug #523</ulink>
the behaviour of the XTM importer with respect to entities has
changed. In earlier versions, one could refer from
<filename>tm.xtm</filename> to the topic <symbol>foo</symbol> in the
external entity <filename>tm.ent</filename> using
<symbol>#foo</symbol>, but now it is necessary to use URIs of the form
<symbol>tm.ent#foo</symbol>.  Relative URIs inside
<filename>tm.ent</filename> will now be resolved relative to the URI
of that entity, rather than relative to the URI of the document entity
as before. We realize that this may break existing documents, but
<ulink url="http://www.w3.org/TR/xmlbase/#granularity">the XML Base
specification</ulink> is very clear on what the correct behaviour is
in this case.
</para>

<para>
Other improvements are:
</para>

<itemizedlist>
<listitem><para>
The <exceptionname>OntopiaRuntimeException</exceptionname> now
provides more information, which leads to better error messages in a
number of situations.
</para></listitem>

<listitem><para>
The <classname>XTMContentHandler</classname> has been optimized
somewhat, resulting in faster XTM imports. The exact speed-up depends
on the topic map in question, but on average imports seem to be about
15% faster.
</para></listitem>

<listitem><para>
The engine (and the rest of the OKS) has been upgraded to the new
log4j 1.2 release. This should have no impact on users in any way.
</para></listitem>
</itemizedlist>

<para>
There have also been a number of API changes:
</para>

<itemizedlist>
<listitem>
<para>The <interfacename>TopicMapBuilderIF</interfacename> interface
has two new methods for creating topics, which allow a single topic
type or a collection of topic types to be added to the topic directly.</para>
</listitem>

<listitem>
<para>The <symbol>net.ontopia.topicmaps.entry</symbol> package has
been considerably reworked and expanded, making it much more powerful
and usable than it was before.</para>
<para>The <classname>DefaultTopicMapSource</classname> class now has
methods for adding and removing topic map references.  The
<interfacename>TopicMapReferenceIF</interfacename> has a number of new
methods added to it, making it considerably more powerful than it was
before. The same applies to
<interfacename>TopicMapSourceIF</interfacename>. The
<classname>StoreFactoryReference</classname> and
<classname>StoreRegistry</classname> classes and the
<interfacename>TopicMapRepositoryIF</interfacename> interface have
been added.</para>
</listitem>

<listitem>
<para>The <classname>TopicStringifiers</classname> utility class now
has a method that lets the user specify desired base name and variant
name scope.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed:
</para>

<itemizedlist>
<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=524">Bug
#524</ulink>: In some cases subject indicator merges when importing
from XTM would result in broken topic maps.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=516">Bug
#516</ulink>: Empty <symbol>xml:base</symbol> attributes caused
XTM loading to fail.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=457">Bug
#457</ulink>: When importing XTM topic maps, merged-in topic maps
would add their source locators to that of the master topic map,
which was wrong, and caused problems with reification.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=511">Bug
#511</ulink>: Using scope on an occurrence or association in LTM would
give a parse error if an association followed directly after. This was
solved by increasing lookahead in the parser.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=523">Bug
#523</ulink>: relative URIs inside XML entities in XTM documents are
now resolved relative to the URI of the entity.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=533">Bug
#533</ulink>: Bad error message when entering file as path in
<filename>tm-sources.xml</filename>.
</para></listitem>

<listitem><para>
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=530">Bug
#530</ulink>: Bad error message from LTM parser when syntax name
in <symbol>#MERGEMAP</symbol> not quoted.
</para></listitem>
</itemizedlist>
</section>
<section> 
<title>Full-text Integration</title>
<para>
The only change in this version is that the command-line
<classname>LuceneIndexer</classname> tool now supports the use of
<symbol>x-tm:rdbms</symbol> URIs to refer to topic maps stored in the
RDBMS backend. This means it can be used to index RDBMS topic maps.
</para>
</section>
<section> 
<title>Query Engine </title>
<para>
In this release, the only change was a bug fix:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=476">Bug
#476</ulink>: Association predicates where the same role type was used
more than once gave wrong results.</para>
</listitem>
</itemizedlist>
</section>
<section> 
<title>Schema Tools</title>
<para>
The documentation of the <symbol>player</symbol> element type in OSL
was extended somewhat. The only other change was a bug fix:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=494">Bug
#494</ulink>: NullPointerException on undefined otherClasses.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>RDBMS Backend Connector</title>
<para>
Two new command-line utilities were added in this version:
<classname>net.ontopia.topicmaps.cmdlineutils.rdbms.RDBMSImport</classname>
and
<classname>net.ontopia.topicmaps.cmdlineutils.rdbms.RDBMSExport</classname>.
These allow users to import and export topic maps into and out of the
RDBMS backend from the command-line.
</para>

<para>
A minor optimization of the lookup queries was made for the PostgreSQL
RDBMS server. 
</para>

<para>
Otherwise, the major change was the introduction of support for
virtual collections. What this means is when calling say
<methodname>getTopics()</methodname> on
<interfacename>TopicMapIF</interfacename> the topics will only be
loaded as needed. This ensures that the JVM does not run out on memory
when methods that return large numbers of objects are called. This
change fixed bugs
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=507">507</ulink> 
and
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=509">509</ulink>.
</para>
</section>

</section>

<!-- ==========================================================================
     1.3 -> 1.3.1                                                              -->

<section>
<title>Changes from 1.3 to 1.3.1</title>

<section> 
<title>Omnigator</title>
<para>
Some new features have been added or changed:
</para>

<itemizedlist>
<listitem>
<para>The export plug-in can now generate OSL schemas from existing
topic maps.</para>
</listitem>

<listitem>
<para>The merge plug-in no longer does name-based merging by
default. The option now has to be turned on explicitly.</para>
</listitem>
</itemizedlist>

<para>The following bug was fixed:</para>

<itemizedlist>
  <listitem><para>Handling of associations with empty (un-specified) roleType
    fixed. See <ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=413">bug 413</ulink>.
    </para></listitem>
</itemizedlist>
</section>

<section>
<title>Navigator Framework</title>

<para>
The behaviour of one tag has changed:
</para>

<itemizedlist>
<listitem><para>The logic:if tag now treats non-existent variables as
being false. This makes it much easier to use the if tag.
</para></listitem>
</itemizedlist>

<para>The following bugs were fixed:</para>

<itemizedlist>
  <listitem><para>In some cases equals comparisons done with
  logic:if would give incorrect results. Now fixed.
    See <ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=503">Bug
    #503</ulink></para></listitem>
</itemizedlist>
</section>


<section> 
<title>Topic Map Engine</title>

<para>The following bugs were fixed:</para>

<itemizedlist>
  <listitem><para>Runtime license no longer expire after 24 hours. See <ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=488">bug 488</ulink>.
    </para></listitem>
  <listitem><para>Class loader license key problem fixed. See <ulink
    url="http://www.ontopia.net/bugs/showbug.cgi?id=484">bug 484</ulink>.
    </para></listitem>
  <listitem><para>Compiling the OKS under JDK 1.4 caused problems with
  running it on 1.3. This is now fixed.</para></listitem>
  <listitem><para>Security exceptions thrown by the getProperty() calls
  in applets are now caught. See
    <ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=500">bug
    500</ulink>.</para></listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.2.5 -> 1.3                                                              -->

<section>
<title>Changes from 1.2.5 to 1.3</title>

<section> 
<title>Omnigator</title>

<para>New features:</para>

<itemizedlist>
<listitem>
<para>The subject index now shows the class hierarchy
structure.</para>
</listitem>
<listitem>
<para>The class hierarchy structure can also be displayed as an image
with links.</para>
</listitem>
<listitem>
<para>A new default stylesheet has been introduced.</para>
</listitem>
<listitem>
<para>Two new plug-ins were added: the tolog query plug-in, and the
OSL schema validator plug-in.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed:
</para>

<itemizedlist>
<listitem>
<para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=354">Bug
  #354</ulink>: Statistics printer didn't use user context.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=399">Bug
  #399</ulink>: The CSS stylesheets now uses relative fonts
  sizes.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=427">Bug
  #427</ulink>: The statistics plug-in incorrectly counted topic types
  with no names.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=448">Bug
  #448</ulink>: The statistics plug-in didn't sort occurrences by type
  correctly.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=459">Bug
  #459</ulink>: The statistics plug-in association structure summary
  failed when association types had no name.</para>
</listitem>
</itemizedlist>

</section>

<section>
<title>Navigator Framework</title>

<para>Changes:</para>

<itemizedlist>
<listitem>
<para>The Acme GIF encoder has been replaced by better JGME
encoder.</para>
</listitem>
<listitem>
<para>The TreeDiagramTag now produces transparent GIFs.</para>
</listitem>
<listitem>
<para>Multiple values are now allowed for object ids in context tag
(<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=300">bug
#330</ulink>). The navigator test framework has been extended to
support this.</para>
</listitem>
<listitem>
<para>"<symbol>function</symbol>" elements can now have return
values. This can be specified using the "<symbol>return</symbol>"
attribute. The attribute should contain the name of a context variable
whose value is to be returned. See
<ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=336">bug
#336</ulink>.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed:
</para>

<itemizedlist>
<listitem>
<para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=354">Bug
  #458</ulink>: <symbol>framework:setcontext</symbol> would
  throw a <exceptionname>NullPointerException</exceptionname> when
  there was no user object in the session.</para>
</listitem>
<listitem>
<para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=354">Bug
  #455</ulink>: <symbol>logic:if</symbol> would silently accept
  testing on undefined variables. It now throws an error in this
  case.</para>
</listitem>
<listitem>
<para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=354">Bug
  #464</ulink>: <symbol>logic:foreach</symbol> would
  throw a <exceptionname>NullPointerException</exceptionname> when
  there was no user object in the session.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=353">Bug
  #353</ulink>: The "<symbol>logic:set</symbol>" tag didn't take the
  user context into account when sorting.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=363">Bug
  #363</ulink>: It was not possible to override the default
  comparator.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=449">Bug
  #449</ulink>: Maximum list lengths can now be specified in the
  navigator configuration file.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>Topic Map Engine</title>

<para>Notable changes in this release are:</para>

<itemizedlist>
<listitem>
<para>All Ontopia Knowledge Suite components now support Java2 version
1.4.</para>
</listitem>
<listitem>
<para>Memory consumption has been reduced by, on average, 30%.</para>
</listitem>
<listitem>
<para>Support for LTM version 1.2 has been added. This new version
contains some changes that break backwards compatibility. A <ulink
url="http://www.python.org">python</ulink> script for updating LTM
topic maps to the new version is included in the distribution
(<filename>${basedir}/utils/ltmfix.py</filename>). Usage:
<screen>python ltmfix.py &lt;oldfile> &lt;newfile></screen></para>
</listitem>
<listitem>
<para>Added support for the ".hytm" file suffix in
<classname>net.ontopia.topicmaps.utils.ImportExportUtils</classname>,
because ISO recently renamed its old HyTime-based topic maps syntax to
<emphasis>HyTM</emphasis>. See <ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=419">bug
  419</ulink>.</para>
</listitem>
<listitem>
<para>Data URLs used in HyTM topic maps are now being resolved into
inline occurrences on import. HyTM export map inline occurrences back
into data URLs. Note that this only apply to data URLs with the
<symbol>text/plain</symbol> content type. See <ulink
url="http://www.ontopia.net/bugs/showbug.cgi?id=355">bug
355</ulink>.</para>
</listitem>
<listitem>
<para>TopicTreeBuilder has been made more robust.</para>
</listitem>
<listitem>
<para>The test suite has been upgraded to use JUnit version
3.7.</para>
</listitem>
<listitem>
<para>The <classname>ReificationUtils</classname> class has two new
methods: <methodname>getReifyingTopics</methodname> and
<methodname>getReifiedObjects</methodname>.</para>
</listitem>
<listitem>
<para>The <classname>AssociationBuilder</classname> class now has new
methods for building ternary associations.</para>
</listitem>
<listitem>
<para>The <exceptionname>OntopiaRuntimeException</exceptionname> has a
new method <methodname>getCause</methodname>, which replaces the now
deprecated <methodname>getException</methodname>, in order to be more
in line with JDK 1.4 exceptions.</para>
</listitem>
<listitem>
<para>The <interfacename>TopicMapBuilderIF</interfacename> has
a new method <methodname>makeAssociationRole</methodname>, which can
also set the player of the role.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed:
</para>
<itemizedlist>
<listitem>
  <para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=269">Bug
  #269</ulink>: The developer guide did not include documentation of
  topic map builders and factories.</para>
</listitem>
<listitem>
  <para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=300">Bug
  #300</ulink>: The ordering of topic map objects in XTM
  canonicalization in some cases caused object to have the same sort
  key. The canonicalization specification was updated (version 1.1) to
  guarantee consistent ordering of objects with different
  properties. The canonicalizer has been updated according to the new
  specificiation.</para>
</listitem>
<listitem>
  <para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=432">Bug
  #432</ulink>: &lt;topicRef> elements occurring inside
  &lt;subjectIdentity> and referring to external topic maps didn't
  cause those topic maps to be loaded. They should since the XTM
  specification clearly states that they should.</para>
</listitem>
<listitem>
  <para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=435">Bug
  #435</ulink>: Resolving relative URI locators sometimes failed.</para>
</listitem>
<listitem>
  <para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=439">Bug
  #439</ulink>: Error messages produced by the LTM processor has been
  made more readable.</para>
</listitem>
<listitem>
  <para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=461">Bug
  #461</ulink>: The test suites produced lots of namespace-prefix
  related errors. These errors are now being filtered out by default,
  since they are of no importance.</para>
</listitem>
<listitem>
  <para><ulink
  url="http://www.ontopia.net/bugs/showbug.cgi?id=442">Bug
  #442</ulink>: The documentation of the
  <classname>MergeUtils</classname>.<methodname>shouldMerge</methodname>
  method was inaccurate. This has now been cleared up.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>Full-text Integration</title>

<para>Changes:</para>

<itemizedlist>
  <listitem><para>The Lucene integration can now work with instances of
  <classname>org.apache.lucene.store.Directory</classname>
  directly. This will for example let you to create and search indexes
  in-memory using the
  <classname>RAMDirectory</classname> class.</para>
  </listitem>
  <listitem><para>The default token stream analyzer is now
  <classname>org.apache.lucene.analysis.standard.StandardAnalyzer</classname>,
  replacing <classname>StopAnalyzer</classname>.</para>
  </listitem>
  <listitem><para>Token stream analyzers can now be configured for use
  with the Lucene fulltext engine. This will let you plug your own
  analyzers. See the classes <classname>LuceneIndexer</classname> and
  <classname>LuceneSearcher</classname> for more information.</para>
  </listitem>
</itemizedlist>

<para>
The following bugs have been fixed:
</para>
<itemizedlist>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=198">Bug
 #198</ulink>: The IndexerIF.delete() method has been added. It lets
 you delete a fulltext index.</para>
</listitem>
<listitem>
  <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=436">Bug
 #436</ulink>: The fulltext plug-in didn't take the user context into
 account when displaying topic names.</para>
</listitem>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=437">Bug
 #437</ulink>: The fulltext plug-in didn't process requests with
 extended characters properly.</para>
</listitem>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=440">Bug
 #440</ulink>: The fulltext plug-in displayed long traceback when
 invalid queries was issued.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>RDBMS Backend Connector</title>

<para>
The following bugs have been fixed:
</para>

<itemizedlist>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=387">Bug
 #387</ulink>: Adding objects that had been deleted earlier caused
 some of the object values to not be included.</para>
</listitem>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=317">Bug
 #317</ulink>: Big imports ran out of memory.</para>
</listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.2.4 -> 1.2.5                                                            -->

<section>
<title>Changes from 1.2.4 to 1.2.5</title>

<section>
<title>Navigator Framework</title>

<para>
The main change in the navigator in this version is that we now bundle
it with Tomcat 4.0, something that caused us to upgrade certain parts
of the code. In addition we have added some tags, and fixed a number
of bugs.
</para>

<para>
A number of changes were made in the navigator framework itself:
</para>

<itemizedlist>
<listitem>
<para>The ontojsp JSP execution environment has been updated to
support JSP 1.2.</para>
</listitem>
<listitem>
<para>The web application and tag library descriptors were updated to
conform to the Servlets 2.3 and JSP 1.2 specifications.</para>
</listitem>
<listitem>
<para>The <symbol>&lt;framework:setcontext></symbol> and
<symbol>&lt;framework:getcontext></symbol> tags were added.</para>
</listitem>
<listitem>
<para>The methods <methodname>getModule</methodname> and
<methodname>getRootNode</methodname> in
<interfacename>net.ontopia.topicmaps.nav2.core.FunctionIF</interfacename>
were deprecated.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed in the 1.2.5 version of the Navigator
Framework:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=405">Bug
#405</ulink>: fixing the behaviour of the
<symbol>&lt;tm:superclasses></symbol> and
<symbol>&lt;tm:subclasses></symbol> tags.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=408">Bug
#408</ulink>: the <symbol>sequence-first</symbol> and
<symbol>sequence-last</symbol> variables were not set correctly by
the <symbol>&lt;logic:foreach></symbol> tag.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=376">Bug
#376</ulink>: order of roles within each association in a list of
associations was inconsistent.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=238">Bug
#238</ulink>: fixed in September 2001, now officially closed.</para>
</listitem>
</itemizedlist>

<para>
In addition, some bugs were also fixed in the Omnigator:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=376">Bug
#376</ulink>: in n-ary associations, topics playing the same role as
the current topic were not displayed.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=407">Bug
#407</ulink>: associations with no type caused page display to
crash.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=304">Bug
#304</ulink>: order of roles within each association in a list of
associations was inconsistent.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=406">Bug
#406</ulink>: binary associations where the same topic plays both
roles were displayed as empty.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>Topic Map Engine</title>
<para>
There were few significant changes in the engine in this version.
</para>

<itemizedlist>
<listitem>
<para>Added the <methodname>getSubclasses(class, level)</methodname>
and <methodname>getSuperclasses(class, level)</methodname> methods on
<classname>net.ontopia.topicmaps.utils.TypeHierarchyUtils</classname>.</para>
</listitem>
<listitem>
<para>Added the <methodname>getBaseAddress</methodname> and
<methodname>setBaseAddress</methodname> methods on the
<classname>net.ontopia.topicmaps.entry.AbstractPathTopicMapSource</classname>
class.</para>
</listitem>
</itemizedlist>

<para>
Three bugs were fixed in this release:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=300">Bug
#300</ulink>: in some cases canonicalization of topic maps would give
topics the same sort keys, thus giving random ordering of some
topics.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=410">Bug
#410</ulink>: when importing LTM files which had a topic with the sort
name PSI and when that topic itself had a sort name the LTM parser
would produce bad topic map object structures.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=397">Bug
#397</ulink>: ISO exporter would fail when exporting association roles
with no player.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>Full-text Integration</title>
<para>
The following bugs have been fixed:
</para>

<itemizedlist>
<listitem>
  <para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=378">Bug
 #378</ulink>: Fulltext testsuite failed on default install (Windows only)</para>
</listitem>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=390">Bug
 #390</ulink>: The <citetitle>Ontopia Full-text Integration - A
 Developer's Guide</citetitle> document has been updated to include
 information about the RDBMS URL scheme. </para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>RDBMS Backend Connector</title>

<para>
The following public class has been added::
</para>

<itemizedlist>
  <listitem><para>RDBMSTopicMapReader</para>
  </listitem>
</itemizedlist>

<para>
The following bug has been fixed:
</para>

<itemizedlist>
<listitem>
  <para><ulink
 url="http://www.ontopia.net/bugs/showbug.cgi?id=390">Bug
 #390</ulink>: The <citetitle>RDBMS Backend Connector - A Developer's
 Guide</citetitle> has been updated to include information about the
 RDBMS URL scheme. </para>
</listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.2.3 -> 1.2.4                                                            -->

<section>
<title>Changes from 1.2.3 to 1.2.4</title>

<section>
<title>Navigator Framework</title>

<para>
This release has seen a number of minor improvements in the navigator
framework.  The changes in the tag libraries are:
</para>

<itemizedlist>
<listitem>
<para>The &lt;output:treediagram> tag no longer uses Batik, but
instead uses an open source GIF encoder. This makes the distribution a
lot smaller.</para>
</listitem>
<listitem>
<para>The &lt;tm:names> tag now rejects duplicate name objects.</para>
</listitem>
</itemizedlist>

<para>
In addition, the navigator developer's guide has been extended with
more detailed information on how to use the &lt;tm:lookup> tag.
</para>
</section>

<section> 
<title>Topic Map Engine</title>
<para>
This release was primarily made to satisfy customer requests for
functionality in the full-text integration. Changes in the engine are
limited to a few new method, and a minor extension to the engine
developer's guide.
</para>

<para>
The following methods has been added:
</para>

<itemizedlist>
<listitem><para>net.ontopia.topicmaps.utils.TopicTreeRendrer.renderImage()</para>
  </listitem>
<listitem><para>net.ontopia.topicmaps.utils.ImportExportUtils.getReader(String propfile, String filename_or_url)</para>
  </listitem>
<listitem><para>net.ontopia.topicmaps.utils.ImportExportUtils.getReader(Map properties, String filename_or_url)</para>
  </listitem>
</itemizedlist>
</section>

<section> 
<title>Full-text Integration</title>

<para>
The following features has been added:
</para>

<itemizedlist>
  <listitem><para>The LuceneIndexer command line tool can now index
  topic maps via the RDBMS Backend Connector. Such topic maps can be
  referenced using URLs of the following type
  "x-tm:rdbms:&lt;topicmapid&gt;", e.g. "x-tm:rdbms:5001".
  </para>
  </listitem>
  <listitem><para>The LuceneIndexer now accepts the --props=propfile
  option, which references the topic map store properties file.</para>
  </listitem>
</itemizedlist>
</section>

<section> 
<title>RDBMS Backend Connector</title>

<para>
The following constructors has been added - all to make it possible to
pass topic map store properties as a Map instance:
</para>

<itemizedlist>
  <listitem><para>RDBMSTopicMapStore(Map properties)</para>
  </listitem>
  <listitem><para>RDBMSTopicMapStore(Map properties, long topicmap_id)</para>
  </listitem>
  <listitem><para>RDBMSTopicMapSource(Map properties)</para>
  </listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.2.2 -> 1.2.3                                                            -->

<section>
<title>Changes from 1.2.2 to 1.2.3</title>

<section>
<title>Navigator Framework</title>

<para>
This release adds some new tags, and fixes a large number of bugs.
The changes in the tag libraries are:
</para>

<itemizedlist>
<listitem>
<para>The &lt;tm:topics> tag can now have other tags as content.</para>
</listitem>
<listitem>
<para>The &lt;tm:lookup> tag has two new attributes: basename
and variant.</para>
</listitem>
<listitem>
<para>The &lt;output:name> tag has a new attribute 'stringifier',
which can be used to control the rendering of names.</para>
</listitem>
<listitem>
<para>The &lt;logic:if> tag has a new attribute 'sizeEquals',
which can be used to test the size of a collection.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed in the Navigator Framework in this release:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=371">Bug
#371</ulink>: &lt;tm:lookup> does not work with relative URIs.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=369">Bug
#369</ulink>: &lt;logic:foreach> does not set up context correctly.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed in the Omnigator in this release:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=352">Bug
#352</ulink>: Main subjects overdoes it for topic maps.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=356">Bug
#356</ulink>: Incorrect order in "Subject indexes".</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>Topic Map Engine</title>

<para>
The following method has been added:
</para>

<itemizedlist>
<listitem><para>net.ontopia.topicmaps.utils.ClassInstanceUtils.resolveAssociations()</para>
  </listitem>
</itemizedlist>

<para>
One old bug has been fixed:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=67">Bug
 #67</ulink>: Class-instance associations not recognized</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>RDBMS Backend Connector</title>

<para>
The following features has been added:
</para>

<itemizedlist>
  <listitem><para>Support for JDBC batch writing. This option boosts
  performance with large transactions and in environments where
  network lag is an issue, since the number of network requests needed
  is significantly lower and the database may provide optimizations
  for performing lots of similar database modifications in
  batches.</para>
  </listitem>
  <listitem><para>JDBC Connection pooling. Note that this features
  requires the JDBC 2.0 Optional Package API to be installed. See the
  requirements section in the installation guide for more
  information.</para>
  </listitem>
  <listitem><para>Ability to disable conforming queries via
  configuration property, i.e. no longer guaranteeing that database
  query results matches changes in the current transaction. In this
  case there may be outstanding transaction changes that have not been
  written to the database to the time the query is issued. Be careful
  when disabling conforming queries.</para>
  </listitem>
  <listitem><para>Subject identity lookup in the database can be
  disabled via a configuration property. Warning: This option should
  only be used when it is known that topic map objects in the database
  with requested identities does not exist.</para>
  </listitem>
</itemizedlist>


<para>
Changes in the database schema:
</para>

<itemizedlist>
  <listitem><para>The following changes were done in the database
  schema because of the column name 'value' sometimes conflicting with
  the 'VALUE' SQL keyword. If you have database instances using the
  old database schema you need to perform the following changes the
  database schema:</para></listitem>

  <listitem><para>Rename <symbol>TM_BASE_NAME.value</symbol> to
  <symbol>TM_BASE_NAME.content</symbol></para>
  </listitem>
  <listitem><para>Rename <symbol>TM_VARIANT_NAME.value</symbol> to
  <symbol>TM_VARIANT_NAME.content</symbol></para>
  </listitem>
  <listitem><para>Rename <symbol>TM_OCCURRENCE.value</symbol> to
  <symbol>TM_OCCURRENCE.content</symbol></para>
  </listitem>

</itemizedlist>

<!--para>An alternative procedure is to export the topic maps in the
database to one of the interchange syntaxes. Replace the existing
database instance schema with the new one. And then import the
exported data.</para-->
</section>

</section>

<!-- ==========================================================================
     1.2.1 -> 1.2.2                                                            -->

<section>
<title>Changes from 1.2.1 to 1.2.2</title>

<section>
<title>Navigator Framework</title>

<para>
This release adds some new tags, and fixes a large number of bugs.
The changes in the tag libraries are:
</para>

<itemizedlist>
<listitem>
<para>The new &lt;tm:sourceLocators> tag for retrieving the
source locators of a topic map object has been added.</para>
</listitem>
<listitem>
<para>The new &lt;tm:reified> tag for retrieving the
object reified by a topic has been added.</para>
</listitem>
<listitem>
<para>The &lt;tm:filter> tag has a new attribute 'is',
which can be used to filter objects according to whether they
are topics, base names, occurrences, associations, or something
else.</para>
</listitem>
<listitem>
<para>The &lt;tm:filter> tag can now use instances of
<interfacename>DeciderIF</interfacename> and not just
<interfacename>NavigatorDeciderIF</interfacename>.</para>
</listitem>
<listitem>
<para>The 'sequence-index' variable set by the &lt;logic:foreach>
tag now begins with 1, rather than 0, as it used to.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed in the Navigator Framework in this release:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=334">Bug
#334</ulink>: &lt;logic:call> does not work inside modules.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=335">Bug
#335</ulink>: &lt;logic:externalFunction> should not call the function, just
register it.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=339">Bug
#339</ulink>: &lt;output:name> and &lt;tm:name> do not support variant name
selection.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=342">Bug
#342</ulink>: Navigator framework should support more than one content-type
in the same web application.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=350">Bug
#350</ulink>: Plug-ins are hardcoded to 'omnigator' directory.</para>
</listitem>
</itemizedlist>

<para>
The following bugs were fixed in the Omnigator in this release:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=320">Bug
#320</ulink>: Reified topic map objects not displyed on topic.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=349">Bug
#349</ulink>: Make Omnigator display better in Netscape 4.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>Topic Map Engine</title>
<para>
The following method has been added:
</para>

<itemizedlist>
<listitem><para>net.ontopia.topicmaps.core.TopicMapTransactionIF.getBuilder()</para>
  </listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.2 -> 1.2.1                                                              -->

<section>
<title>Changes from 1.2 to 1.2.1</title>

<section>
<title>Navigator Framework</title>

<para>Added the &lt;framework:response&gt; JSP tag, which sets
response headers according to its attribute values or the application
defaults.</para>

</section>

<section>
<title>What's new in version 1.2</title>

<para>
Version 1.2 of the Ontopia Navigator Framework and the Ontopia
Omnigator is a complete rewrite of the entire navigator framework, and
also of the Omnigator, which has now been implemented using the new
framework. The old navigator is still included in the distribution,
but the documentation has been taken out.
</para>

<para>
We have replaced the old tag libraries with a completely new set of
tag libraries, which are designed according to different principles.
We think that the new tag libraries are enormously much easier to
learn than the previous ones, and that they are also much more
flexible. The Omnigator has been completely re-implemented (making the
current version the fifth implementation from scratch) using the new
tag libraries.
</para>

<para>
Since the entire navigator package has been entirely replaced by a new
package there is no list of changes. Note that we expect changes to
the navigator from this point on to be backwards-compatible, except
where current features are marked as experimental in the documentation.
</para>
</section>

<section> 
<title>Topic Map Engine</title>
<para>
There were few changes in this new release. Some new functionality has
been added, and some problems have been fixed, but in general very
little has happened with the engine.
</para>

<para>
Two improvements have been made:
</para>

<itemizedlist>
<listitem>
<para>when importing XTM documents, unknown elements in the XTM
namespace are now warned about, and</para>
</listitem>
<listitem>
<para>MergeUtils did not copy source locators from source objects to
target objects, but this is now fixed.</para>
</listitem>
</itemizedlist>

<para>
Four new classes have been added:
</para>

<itemizedlist>
<listitem><para>net.ontopia.topicmaps.utils.ImportExportUtils,</para>
  </listitem>
<listitem><para>net.ontopia.topicmaps.utils.ReificationUtils,</para>
  </listitem>
<listitem><para>net.ontopia.topicmaps.utils.AssociationBuilder, and</para>
  </listitem>
<listitem><para>net.ontopia.topicmaps.utils.DuplicateSuppressionUtils.</para>
  </listitem>
</itemizedlist>

<para>
Only one bugs were fixed in this release:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=259">Bug
 #259</ulink>; misspelling the name of the <symbol>topicMap</symbol>
element causes
<exceptionname>NullPointerException</exceptionname>s.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=305">Bug
 #305</ulink>; topic map ID sometimes set to file URI on export.</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=308">Bug
 #308</ulink>; LTM reader did not handle duplicate subject indicators.</para>
</listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.1.2 -> 1.1.3                                                            -->

<section>
<title>Changes from 1.1.2 to 1.1.3</title>

<section>
<title>Navigator Framework</title>

<para>Reviewed the classes in package nav.utils.comparators;
BaseNameComparator deprecated, NameComparator takes sort variant into
account if available.</para>

<para>nav.context.UserFilterContextStore extended to also store
variant name scoping themes (basides base name scope)</para>
</section>

<section> 
<title>Topic Map Engine</title>
<para>Occurrence.toString() now prints contents of inline
occurrences.</para>

<para>CollectionUtils.getRandom() now delivers a really random
entry.</para>

<para>
Four bugs have been fixed:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=237">Bug
 #237 fixed</ulink>; export of empty and null strings generally
 improved,</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=241">Bug
#241 fixed</ulink>; XTMContentHandler and internal class
ContentHandler of XMLConfigSource now use qualified name of element
instead of local name in methods startElement and endElement,</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=244">Bug
#244 fixed</ulink>; subject indicator references from topics to
reified topic map objects are no longer broken on export to XTM
format, and</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=245">Bug
#245 fixed</ulink>; the ISO export can now handle the case where the
PSI for display or sort name appears as a source locator instead of as
a subject indicator.</para>
</listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.1.1 -> 1.1.2                                                            -->

<section>
<title>Changes from 1.1.1 to 1.1.2</title>

<section>
<title>Navigator Framework</title>

<para>
A new plug-in has been added: the "LTM add" plug-in, which lets you add
content to already loaded topic maps using LTM syntax.
</para>

<para>
A part of the documentation relating to how connect the navigator to
the RDBMS backend was updated.
</para>
</section>

<section> 
<title>Topic Map Engine</title>

<para>
The <classname>LTMTopicMapReader</classname> class now also implements
the <interfacename>TopicMapImporterIF</interfacename> interface.
</para>

<para>
The <classname>NameGrabber</classname> class can now grab names
appearing in a specific scope defined by a collection of topics.
</para>

<para>
Some problems with the test suite, both on Windows and generally, have
been fixed.
</para>

<para>
Two bugs have been fixed:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=231">Bug #231 (XTM element IDs not preserved on export)</ulink>, and</para>
</listitem>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=230">Bug #230 (xml:base-related problem)</ulink>.</para>
</listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.1 -> 1.1.1                                                              -->

<section>
<title>Changes from 1.1 to 1.1.1</title>

<section>
<title>Navigator Framework</title>

<para>
The major change in this release is that we have upgraded the bundled
version of tomcat, closing a security hole. Other than that the main
changes are bug fixes.
</para>

<itemizedlist>
<listitem>
<para>The tomcat version bundled with the navigator was upgraded from
version 3.2.1 to 3.2.3. This makes the navigator start much faster,
and also closes a serious security hole in tomcat.</para>
</listitem>

<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=225">Bug
#225 (Plug-ins don't work in Netscape 4.x)</ulink> has been fixed.</para>
</listitem>

<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=226">Bug
#226 (Statistics table display problems in Netscape 4.x)</ulink> has
been fixed.</para>
</listitem>

<listitem>
<para>The <classname>ConfigReader</classname> class has been improved
to make it much more robust in cases where files are missing,
configuration settings are missing or configuration files are screwed
up.</para>
</listitem>
</itemizedlist>
</section>

<section> 
<title>Topic Map Engine</title>
<para>
Only very minor changes have been made to the engine. These are:
</para>

<itemizedlist>
<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=219">Bug
#219 (Obscure merging bug)</ulink> has been fixed.</para>
</listitem>

<listitem>
<para><ulink url="http://www.ontopia.net/bugs/showbug.cgi?id=222">Bug
#222 (Problem with null role players in merging)</ulink> has been fixed.</para>
</listitem>

<listitem>
<para>The XMLConfigSource class was made more robust. It now gives
much better error messages when problems occur.</para>
</listitem>

<listitem>
<para>Some new test cases have been added. Some of these test for the
fixed bugs, others test new things.</para>
</listitem>
</itemizedlist>
</section>

</section>

<!-- ==========================================================================
     1.0.x -> 1.1                                                           -->

<section>
<title>Changes from 1.0.x to 1.1</title>

<section>
<title>Navigator Framework</title>

<section>
<title>Overview</title>

<para>
Since version 1.1 the code of the Navigator Framework has been further
improved through optimizations, some internal refactoring of the code,
and also a number of bug fixes. The result is a version of the
framework that is decidedly more mature and performs better. In
particular, loading topic maps is now substantially faster than in
previous versions.
</para>

<para>
In addition to the improvements to the framework, the Omnigator has
been revisited and its user interface further improved. Some bugs have
also been fixed in the Omnigator, making it able to handle even more
topic maps.
</para>

<para>
This release also contains substantially improved and extended
documentation compared to the 1.0.x releases.
</para>

<para>
The main improvements, however, fall in the category of extended
functionality. The following are the main extensions:
</para>

<itemizedlist>
<listitem><para>
The Navigator framework has been extended to support a user context
filter, which users can use to apply scope filtering to topic maps, in
order to filter out unnecessary information or, for example, switch
the language they are navigating in. The user context filter is
described in more detail in <citetitle>The Ontopia Omnigator User
Guide</citetitle>.
</para></listitem>

<listitem><para>
The Navigator has been extended with the concept of plug-ins, which are
encapsulated functionality that can be dropped into Navigator
applications. This concept is described in the
<citetitle>Ontopia Navigator Plug-ins Developer's Guide</citetitle>.
</para></listitem>

<listitem><para>
The Navigator now has native support for the textual LTM topic map
format (described in a separate technology note), which means that LTM
files can now be loaded directly into Navigator applications.
</para></listitem>
</itemizedlist>

<para>
The log4j package used by the engine to provide logging of actions has
been upgraded from version 1.0.4 to version 1.1.3, which has given
better performance in some cases.
</para>
</section>

<section>
<title>Detailed changelog</title>

<para>
The <filename>application.xml</filename> file has been extended to
allow users to specify the default model, view, and skin. It is also
possible to extend the lists of models and views. Skins are now found
by scanning a specified directory for CSS stylesheets.
</para>

<para>
The <symbol>superTypes</symbol> tag now has an
<symbol>excludeTypes</symbol> argument in the <symbol>args</symbol>
attribute, which can be used to keep the types of the current topic
out of the list of supertypes.
</para>

<para>
The following new tags have been added:
</para>

<itemizedlist>
<listitem><para>DescriptionOccurrencesTag</para></listitem>
<listitem><para>FacetValueTypesTag</para></listitem>
<listitem><para>IndexScopesTag</para></listitem>
<listitem><para>ResourceFacetValuesTag</para></listitem>
<listitem><para>SubjectIndicatorsParentTopicsTag</para></listitem>
</itemizedlist>

<para>
See <citetitle>The Ontopia Navigator Tag Library Reference</citetitle>
for more information on these tags.
</para>
</section>
</section>

<section> 
<title>Topic Map Engine</title>

<section>
<title>Overview</title>

<para>
In general, the changes to the Topic Map Engine itself have not been
very substantial. The main changes have been made externally, such as
the addition of an RDBMS backend, modifications to the Navigator,
integration of the Fulltext Search capability, and so on.
</para>

<para>
A number of optimizations have been done, however, resulting in
markedly improved performance for some operations, like importing XML
topic maps. A number of minor bugs have also been fixed, and XML
import is now more robust, and also gives better error messages than
before. 
</para>

<para>
The <classname>URILocator</classname> class has been rewritten from
scratch. The original was based on the
<classname>java.net.URL</classname>, which meant that it couldn't
handle non-standard URI protocols or characters in URIs that were not
in the platform default character set. It was also too slow. The new
implementation solves all these problems.
</para>

<para>
The engine now has native support for the textual LTM topic map
format (described in a separate technology note), which means that LTM
files can now be imported directly into the object model. This support
is found in the <symbol>net.ontopia.topicmaps.utils.ltm</symbol>
package.
</para>

<para>
The log4j package used by the engine to provide logging of actions has
been upgraded from version 1.0.4 to version 1.1.3, which has given
better performance in some cases.
</para>

<para>
The test suite has been extended with about 150 new test cases, making
it substantially more comprehensive.
</para>
</section>

<section>
<title>Detailed changelog</title>

<para>
The main API changes have been in the
<symbol>net.ontopia.topicmaps.utils</symbol> package, where the
changes listed below have been made. Some methods have also been
deprecated and added; see the javadoc for these. Generally the API
changes have been quite limited.
</para>

<itemizedlist>
<listitem>
<para>Added the <classname>NameGrabber</classname> class in
the package. This is a generally useful class used to
pick out the in some sense most appropriate name from a topic.</para>
</listitem>
<listitem>
<para>Added the <classname>TopicCharacteristicsGrabbers</classname>
class as a generalization of
<classname>DisplayNameGrabber</classname>.
<classname>DisplayNameGrabber</classname> was deprecated accordingly.
</para>
</listitem>
<listitem>
<para>Added the <classname>UnconstrainedScopeDecider</classname>
class as an easy way to make other scope deciders accept all
objects in the unconstrained scope.
</para>
</listitem>
</itemizedlist>
</section>
</section>

</section>

</article>
